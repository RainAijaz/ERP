const { parseCookies, setCookie } = require("../utils/cookies");

const translations = {
  en: {
    // --- USERS MODULE ---
    add_user: "Add User",
    edit_user: "Edit User",
    manage_system_access: "Manage system access",
    back_to_users: "Back to users",
    leave_blank_keep: "(Set new password (leave blank to keep current))",
    select_role: "Select Role",
    assigned_branches: "Assigned Branches",
    branch_access_hint: "User can only access data for assigned branches.",
    is_active_user: "Is Active User",
    role: "Role",
    email: "Email",
    selected: "Selected",

    // --- ROLES MODULE ---
    add_role: "Add Role",
    manage_user_roles: "Manage user roles",
    back_to_roles: "Back to roles",
    role_name: "Role Name",
    description: "Description",

    // --- PERMISSIONS MODULE ---
    configure_access_rights: "Configure access rights",
    user_overrides: "User Overrides",
    select_user: "Select User",
    module: "Module",
    screen: "Screen",
    navigate: "Navigate",
    voucher: "Voucher",
    report: "Report",
    view: "View",
    create: "Create",
    delete: "Delete",
    approve: "Approve",
    post: "Post",
    approval_settings: "Approval Settings",
    approval_rules: "Approval Rules",
    requires_approval: "Requires Approval",
    approval_submitted: "Approval request submitted. Changes will apply after approval.",
    approval_sent: "Change request sent for approval. It will be applied once reviewed.",
    notice: "Notice",
    approval_approved: "Approval request approved.",
    approval_rejected: "Approval request rejected.",
    approval_request_updated: "Approval request updated.",
    approval_request_updated_detail: "Your pending approval request was updated: {summary}",
    approval_no_changes: "No changes found in approval request.",
    approval_edit_failed: "Unable to update approval request.",
    approval_edit_invalid_payload: "Invalid approval edit payload.",
    approval_edit_no_fields: "No editable fields found in this request.",
    approval_edit_delete_not_allowed: "Delete requests cannot be edited.",
    approval_request_not_found: "Approval request not found or already decided.",
    approval_apply_failed: "Approval applied, but change could not be executed.",
    approval_updates: "Since your last login: {approved} approved, {rejected} rejected.",
    approval_approved_detail: "Your approval request was approved: {summary}",
    approval_rejected_detail: "Your approval request was rejected: {summary}",
    permission_denied: "Permission denied.",
    error_invalid_id: "Invalid ID.",
    error_not_found: "Record not found.",
    override_mode_active: "Override mode active",
    user_overrides_hint: "User-only changes apply to this user only (role permissions still apply unless overridden).",
    role_changes_global_hint: "Role permissions apply to all users assigned to this role.",
    save_permissions: "Save Permissions",
    search_permissions: "Search permissions...",
    expand_all: "Expand all",
    collapse_all: "Collapse all",
    scope_missing: "Scope missing in registry",
    select_target_to_configure: "Select a target to configure.",
    select_user_to_configure: "Select a user to configure permissions.",
    select_role_to_configure: "Select a role to configure permissions.",
    choose_role_above: "Choose a role above to view and update permissions.",
    choose_role_or_user_above: "Choose a role or user above to configure permissions.",
    back_to_branches: "Back to branches",
    edit_branch: "Edit Branch",
    branch_code: "Branch Code",
    unique_identifier_hint: "Short unique code for this branch (e.g. LHR01)",
    branch_name: "Branch Name",
    city: "City",
    is_active: "Is Active",
    active_branch_hint: "Inactive branches are hidden from selection and cannot be used for new transactions.",
    save_changes: "Save Changes",
    manage_company_locations: "Manage branch locations and availability",
    add_new_branch: "Add Branch",
    code: "Code",
    no_records_found: "No records found.",
    no_navigate_access_message: "Records are hidden because you don't have navigation access.",
    // --- BRAND & AUTH ---
    brand: "CHAND EVA",
    dashboard: "Dashboard",
    welcome: "Welcome back. Select a module from the navigation to begin.",
    branch: "Branch",
    signed_in_as: "Signed in as",
    logout: "Logout",
    sign_in: "Sign in",
    use_credentials: "Use your ERP credentials to continue.",
    username: "Username",
    password: "Password",
    login: "Login",
    incorrect_credentials: "Incorrect username or password. Try again.",
    user_inactive: "User is inactive. Contact admin.",
    login_failed: "Login failed. Please try again.",

    // --- MODULES ---
    administration: "Administration",
    setup: "Setup",
    branches: "Branches",
    users: "Users",
    roles: "Roles",
    permissions: "Permissions",
    approvals: "Approvals", // Renamed from "Pending Approvals" to be generic
    audit_logs: "Activity Log",
    master_data: "Master Data",
    accounts_parties: "Accounts & Parties",
    accounts: "Accounts",
    parties: "Parties",
    products: "Products",
    basic_information: "Basic Information",
    hr_payroll: "HR & Payroll",
    financial: "Financial",
    purchase: "Purchase",
    production: "Production",
    inventory: "Inventory",
    outward_returnable: "Outward & Returnable",
    sales: "Sales",

    // --- COMMON LABELS ---
    add: "Add",
    list: "List",
    show: "Show",
    rows: "Rows",
    status: "Status",
    search: "Search",
    all: "All",
    none: "NONE",
    active: "Active",
    inactive: "Inactive",
    sr_no: "Sr.No",
    actions: "Actions",
    no_entries: "No entries yet.",
    yes: "Yes",
    no: "No",
    edit: "Edit",
    activate: "Activate",
    deactivate: "Deactivate",
    permanent_delete: "Permanent Delete",
    confirm: "Confirm",
    are_you_sure: "Are you sure?",
    continue: "Continue",
    cancel: "Cancel",
    save: "Save",
    audit: "Audit",
    created: "Created",
    updated: "Updated",
    enter_details_save: "Enter details and save.",
    showing: "Showing",
    to: "to",
    of: "of",
    entries: "entries",
    download: "Download",
    print: "Print",
    filters: "Filters",
    apply: "Apply",
    clear: "Clear",
    include: "Include",
    exclude: "Exclude",
    select: "Select",
    prev: "Prev",
    next: "Next",
    new: "New",
    back_to_list: "Back to list",
    date: "Date",
    summary: "Summary",
    details: "Details",
    action: "Action",
    entity: "Entity",
    entity_type: "Entity Type",
    all_branches: "All branches",
    audit_context_details: "Audit Context Details",
    saving: "Saving...",
    load_failed: "Failed to load content.",
    error_saving: "Error saving.",
    error_generic: "Error.",
    generic_error: "Error.",
    error_record_in_use: "This record is linked to other data and cannot be deleted.",
    error_duplicate_record: "A record with the same details already exists.",
    error_invalid_value: "One or more values are invalid.",
    ok: "OK",
    unexpected_response: "Unexpected response",
    network_error: "Network error. Please try again.",

    // --- SKU & MATRIX SPECIFIC ---
    skus: "SKUs",
    skus_description: "Maintain SKU variants and pricing.",
    check_availability: "Check Availability",
    no_new_combinations: "All selected combinations already exist.",
    new_combinations_found: "new combinations found.",
    sale_rate: "Sale Rate",
    sku_code: "SKU Code",
    barcode: "Barcode",
    size: "Size",
    color: "Color",
    grade: "Grade",
    packing_type: "Packing Type",
    article: "Article",
    rates: "Rates",

    // --- APPROVALS & STATUSES ---
    pending: "Pending",
    approved: "Approved",
    rejected: "Rejected",
    unknown: "Unknown",
    requester: "Requester",
    old_rate: "Old Rate",
    new_rate: "New Rate",
    approve: "Approve",
    reject: "Reject",
    rate_change_submitted: "Rate change submitted for approval.",
    request_approved: "Request approved.",
    request_rejected: "Request rejected.",

    // --- ERRORS & MESSAGES ---
    saved_successfully: "Saved successfully.",
    error_required_fields: "Please fill all required fields.",
    error_unable_save: "Unable to save. Check for duplicate values or invalid data.",
    error_immutable_field: "Cannot edit physical variant properties. Create a new SKU instead.",
    error_update_status: "Unable to update status. This item may be in use.",
    error_delete: "Unable to delete. This item may be in use.",
    error_duplicate_code: "Code already exists.",
    error_duplicate_name: "Request could not be approved because the name already exists.",

    // --- EXISTING KEYS (Preserved) ---
    units: "Units",
    groups: "Groups",
    party_groups: "Party Groups",
    account_groups: "Account Groups",
    account_type: "Account Type",
    account_group: "Account Group",
    account_code: "Account Code",
    account_name: "Account Name",
    lock_posting: "Lock Posting",
    party_type: "Party Type",
    party_group: "Party Group",
    party_code: "Party Code",
    party_name: "Party Name",
    address: "Address",
    phone_primary: "Phone (Primary)",
    phone_secondary: "Phone (Secondary)",
    phone_1: "Phone 1",
    phone_2: "Phone 2",
    city: "City",
    customer: "Customer",
    supplier: "Supplier",
    credit_allowed: "Credit Allowed",
    credit_limit: "Credit Limit",
    departments: "Departments",
    product_groups: "Product Groups",
    product_subgroups: "Product Sub-Groups",
    product_types: "Product Types",
    sizes: "Sizes",
    colors: "Colors",
    grades: "Grades",
    packing_types: "Packing Types",
    cities: "Cities",
    uom_conversions: "UOM Conversions",
    finished: "Finished",
    semi_finished: "Semi-Finished",
    raw_materials: "Raw Materials",
    semi_finished_goods: "Semi-Finished Goods",
    finished_goods: "Finished Goods",
    article_name: "Article Name",
    group: "Group",
    sub_group: "Sub Group",
    base_unit: "Base Unit",
    category: "Category",
    uses_sfg: "Uses SFG",
    sfg_part: "SFG Part",
    sfg_part_type: "SFG Part Type",
    upper: "Upper",
    step: "Step",
    color_rates: "Color Rates",
    avg_purchase_rate: "Avg Purchase Rate",
    min_stock: "Min Stock",
    sizes_label: "Sizes",
    usage: "Usage In",
    expanded: "Expanded",
    one_color: "One Color",
    one_size: "One Size",
    only: "Only",
    variant_id: "Variant ID",
    purchase_rate: "Purchase Rate",
    sizes_help: "Select one or more sizes used by this semi-finished item.",
    finished_description: "Maintain finished articles, categories, and SFG usage flags.",
    semi_finished_description: "Maintain semi-finished items and their applicable sizes.",
    raw_materials_description: "Maintain raw materials with per-color purchase rates.",
    bom: "BOM",
    bom_list: "BOM List",
    bom_versions: "Versions",
    bom_approval: "Approval",
    bom_description: "Manage global BOM drafts, approvals, and versions.",
    bom_new_title: "Add BOM",
    bom_edit_title: "Edit BOM",
    bom_header: "BOM Header",
    bom_output_qty: "Output Quantity",
    bom_tab_rm: "Raw Materials",
    bom_tab_sfg: "Semi-Finished Products",
    bom_tab_labour: "Labours",
    bom_tab_variant_rules: "Variant Rules",
    bom_rm_rules_size_wise: "Raw Material Rules Size Wise",
    bom_header_required_message: "Complete BOM Header first. Other sections depend on it.",
    all_sizes: "All Sizes",
    quantity: "Quantity",
    bom_normal_loss_pct: "Normal Loss %",
    bom_create_new_version: "Create New Version",
    bom_version_created: "New version created.",
    bom_versions_description: "Track version history and status by item and level.",
    bom_specific: "Specific",
    scope: "Scope",
    level: "Level",
    version: "Version",
    save_draft: "Save Draft",
    send_for_approval: "Send for Approval",
    department: "Department",
    bom_rule_add_rm: "Add RM",
    bom_rule_remove_rm: "Remove RM",
    bom_rule_replace_rm: "Replace RM",
    bom_rule_adjust_qty: "Adjust Qty",
    bom_rule_change_loss: "Change Loss",
    bom_error_item_required: "Please select an item.",
    bom_error_level_required: "Please select a valid BOM level.",
    bom_error_output_qty_required: "Output quantity must be greater than zero.",
    bom_error_output_uom_required: "Output UOM is required.",
    bom_error_item_not_found: "Selected item does not exist.",
    bom_error_level_item_mismatch: "Selected level does not match item type.",
    bom_error_rm_line_invalid: "Invalid raw material line.",
    bom_error_rm_item_invalid: "Raw material line must reference an RM item.",
    bom_error_rm_uom_required: "Raw material UOM is required.",
    bom_error_loss_pct_invalid: "Normal loss % must be between 0 and 100.",
    bom_error_sfg_not_allowed_for_sfg_level: "Semi-finished BOM cannot include SFG section lines.",
    bom_error_sfg_line_invalid: "Invalid semi-finished line.",
    bom_error_sfg_item_invalid: "Selected SKU must belong to a semi-finished item.",
    bom_error_sfg_uom_required: "SFG UOM is required.",
    bom_error_sfg_requires_approved_bom: "Selected SFG item has no approved BOM.",
    bom_error_labour_line_invalid: "Invalid labour line.",
    bom_error_labour_rate_type_invalid: "Invalid labour rate type.",
    bom_error_size_required_for_specific_scope: "Size is required for specific scope.",
    bom_error_packing_required_for_specific_scope: "Packing type is required for specific scope.",
    bom_error_color_required_for_specific_scope: "Color is required for specific scope.",
    bom_error_material_required_for_specific_scope: "Target material is required for specific scope.",
    bom_error_variant_action_invalid: "Invalid variant action type.",
    bom_error_missing_material_rates: "Missing required material rates.",
    bom_error_missing_material_rates_detail: "Missing active purchase rates for",
    bom_error_draft_exists: "A draft already exists for this item and level.",
    bom_error_only_draft_editable: "Only draft BOM can be edited.",
    bom_error_approve_requires_draft: "Only draft BOM can be approved.",
    bom_error_new_version_requires_approved: "New version can only be created from an approved BOM.",
    bom_error_already_pending: "A pending approval already exists for this BOM.",
    employees: "Employees",
    sales_commission: "Sales Commission",
    allowances: "Allowances",
    labours: "Labours",
    labour_rates: "Labour Rates",
    employees_description: "Manage employee master records for HR and payroll.",
    labours_description: "Manage labour master records for production and wage processing.",
    sales_commission_description: "Sales commission rules will be configured here per employee and product scope.",
    allowances_description: "Employee allowance rules will be configured here.",
    labour_rates_description: "Labour rate rules will be configured here by product/sub-group/group/flat.",
    hr_screen_description: "Manage HR and payroll setup using the same universal workflow and approvals.",
    hr_screen_planned_note: "This screen path is active and connected to permissions. Detailed workflow implementation is scheduled in the next phase.",
    requirement_ref: "Requirement Ref",
    screen: "Screen",
    id: "ID",
    name: "Name",
    cnic: "CNIC",
    phone_number: "Phone Number",
    designation_role: "Designation / Role",
    payroll_type: "Payroll Type",
    payroll_monthly: "Monthly",
    payroll_daily: "Daily",
    payroll_piece_rate: "Piece Rate",
    payroll_multiple: "Multiple",
    basic_salary: "Basic Salary",
    production_category: "Production Category",
    production_category_finished: "Finished",
    production_category_semi_finished: "Semi-Finished",
    placeholder_employee_code: "EMP-001",
    placeholder_employee_name: "Ali Raza",
    placeholder_labour_code: "LAB-001",
    placeholder_labour_name: "Rafiq",
    placeholder_employee_cnic: "35202-1234567-1",
    placeholder_phone_number: "0300-0000000",
    placeholder_designation_role: "Sales Officer",
    error_invalid_payroll_type: "Invalid payroll type selected.",
    error_invalid_salary: "Basic salary must be a non-negative number.",
    error_invalid_status: "Invalid status selected.",
    error_branch_out_of_scope: "One or more selected branches are outside your branch access.",
    error_invalid_production_category: "Invalid production category selected.",
    error_invalid_salary_precision: "Basic salary supports up to 2 decimal places and valid range only.",
    error_select_department: "Please select a department.",
    error_invalid_cnic: "Invalid CNIC format.",
    error_invalid_phone_number: "Invalid phone number format.",
    error_duplicate_cnic: "CNIC already exists.",
    error_duplicate_phone_number: "Phone number already exists.",
    apply_on: "Apply On",
    apply_on_sku: "Article (SKU)",
    apply_on_subgroup: "Product Sub-Group",
    apply_on_group: "Product Group",
    apply_on_all: "All Products (Flat)",
    apply_on_flat: "Flat",
    target_type: "Target Type",
    target: "Target",
    impact: "Impact",
    affected_skus: "Affected SKUs",
    applies_to_labours: "Applies To Labours",
    no_labours_found_for_department: "No active labours found for selected department.",
    expand: "Expand",
    collapse: "Collapse",
    select_target_to_preview_impact: "Select a target to preview impact.",
    resolved_from: "Resolved From",
    overridden: "Overridden",
    applied: "Applied",
    product_scope: "Product Scope",
    coverage_scope_fg: "Finished",
    coverage_scope_sfg: "Semi-Finished",
    coverage_scope_both: "Both",
    item_selector: "Item Selector",
    commission_basis: "Commission Basis",
    commission_basis_net_sales_percent: "% of Net Sales",
    commission_basis_gross_margin_percent: "% of Gross Margin",
    commission_basis_fixed_per_unit: "Fixed per Basic Unit",
    commission_basis_fixed_per_invoice: "Fixed per Invoice",
    rate: "Rate",
    previous_dozen_rate: "Previous Dozen Rate",
    new_dozen_rate: "New Dozen Rate",
    previous_rate: "Previous Rate",
    new_rate: "New Rate",
    value_type: "Value Type",
    value_type_percent: "Percent",
    value_type_fixed: "Fixed",
    value: "Value",
    reverse_on_returns: "Reverse on Returns",
    allowance_type: "Allowance Type",
    amount_type: "Amount Type",
    amount_type_fixed: "Fixed",
    amount_type_percent_basic: "% of Basic",
    amount: "Amount",
    frequency: "Frequency",
    frequency_monthly: "Monthly",
    frequency_daily: "Daily",
    taxable: "Taxable",
    applies_to_all_labours: "Apply to All Labours",
    rate_type: "Rate Type",
    rate_type_per_dozen: "Per Dozen",
    rate_type_per_pair: "Per Pair",
    rate_value: "Rate Value",
    batch_dozen_rates: "Batch Dozen Rates",
    article_type: "Article Type",
    article_type_fg: "Finished Goods (FG)",
    article_type_sfg: "Semi-Finished Goods (SFG)",
    all_labours: "All Labours",
    load_skus: "Load SKUs",
    current_dozen_rate: "Current Dozen Rate",
    new_dozen_rate: "New Dozen Rate",
    row_notes: "Row Notes",
    effective_from: "Effective From",
    effective_to: "Effective To",
    apply_rate_to_selected: "Apply To Selected",
    filter_primary: "Primary Filter",
    filter_secondary: "Secondary Filter",
    error_invalid_apply_on: "Invalid apply-on selection.",
    error_invalid_commission_basis: "Invalid commission basis selected.",
    error_invalid_value_type: "Invalid value type selected.",
    error_invalid_rate_type: "Invalid rate type selected.",
    error_select_rate_type: "Please select a rate type.",
    error_invalid_rate_value: "Invalid value. Enter a non-negative number with up to 2 decimals.",
    error_select_article_type: "Please select article type.",
    error_invalid_article_type: "Invalid article type selected.",
    error_select_commission_basis: "Please select a commission basis.",
    error_action_not_allowed: "This action is not allowed.",
    error_select_sku: "Please select an article (SKU).",
    error_select_subgroup: "Please select a product sub-group.",
    error_select_group: "Please select a product group.",
    error_select_labour: "Please select a labour.",
    error_duplicate_labour_rate_rule: "A labour rate for this Labour + Department + SKU already exists.",
    error_duplicate_commission_rule: "A similar commission rule already exists.",
    error_group_subgroup_only_for_bulk_commission: "For this screen, Product Group/Sub-Group updates are allowed only via SKU preview and bulk save.",
    error_invalid_bulk_commission_payload: "Invalid commission payload.",
    error_group_subgroup_only_for_bulk_labour_rate: "For this screen, Product Group/Sub-Group labour rates are allowed only via SKU preview and bulk save.",
    error_invalid_bulk_labour_rate_payload: "Invalid labour rate payload.",
    error_no_target_skus_found: "No target SKUs found for selected Product Group/Sub-Group.",
    success_bulk_commission_saved: "Sales commission for affected SKUs saved successfully.",
    success_bulk_commission_saved_counts: "Created: {created}, Updated: {updated}.",
    success_bulk_labour_rate_saved: "Labour rates for affected SKUs saved successfully.",
    success_bulk_labour_rate_saved_counts: "Created: {created}, Updated: {updated}.",
    view_pending_approval: "View pending approval",
    error_invalid_amount_type: "Invalid amount type selected.",
    error_invalid_frequency: "Invalid frequency selected.",
    error_duplicate_allowance_rule: "Allowance type already exists for this employee.",
    placeholder_allowance_type: "House, Conveyance, Mobile",
    vouchers: "Vouchers",
    cash_voucher: "Cash Voucher",
    bank_voucher: "Bank Voucher",
    journal_voucher: "Journal Voucher",
    reports: "Reports",
    financial_reports: "Financial Reports",
    purchase_invoice: "Purchase Invoice",
    purchase_order: "Purchase Order",
    purchase_return: "Purchase Return",
    purchase_reports: "Purchase Report",
    abnormal_loss: "Abnormal Loss",
    production_reports: "Production Reports",
    inventory_voucher: "Inventory Voucher",
    stock_count: "Stock Count",
    stock_transfer: "Stock Transfer",
    inventory_reports: "Inventory Reports",
    returnables: "Returnables",
    returnable_reports: "Returnable Reports",
    sales_voucher: "Sales Voucher",
    sales_order: "Sales Order",
    sales_reports: "Sales Reports",
    auto_translate: "Auto Translate",
    translate_to_urdu: "Translate to Urdu",
    translation_fetching: "Fetching translation...",
    translation_idle: "Click Auto Translate to fill Urdu name",
    translation_ready: "Translated",
    translation_failed: "Translation unavailable",
    tooltip_account_type: "Main accounting classification (Asset, Liability, Equity, Revenue, Expense).",
    tooltip_code: "Short code used in reports and filtering.",
    tooltip_contra: "Offsets the balance of its parent group.",
    help_unit_code: "Short unique key used by the system (e.g., PCS, KG).",
    help_unit_name: "Descriptive name shown on reports and documents.",
    language: "Language",
    english: "English",
    urdu: "Urdu",
    pair_rate: "Pair Rate",
    dozen_rate: "Dozen Rate",
    variants: "Variants",
    add_new_combinations: "Add Variants",
    variants_sent_approval: "Variants will be added once approved.",
  },
  ur: {
    // --- USERS MODULE ---
    add_user: "نیا صارف شامل کریں",
    edit_user: "صارف میں ترمیم کریں",
    manage_system_access: "سسٹم تک رسائی کا انتظام کریں",
    back_to_users: "صارفین پر واپس",
    leave_blank_keep: "(نیا پاس ورڈ دیں (موجودہ برقرار رکھنے کے لیے خالی چھوڑیں))",
    select_role: "رول منتخب کریں",
    assigned_branches: "تفویض شدہ برانچز",
    branch_access_hint: "صارف صرف تفویض شدہ برانچز کا ڈیٹا دیکھ سکتا ہے۔",
    is_active_user: "فعال صارف ہے",
    role: "رول",
    email: "ای میل",
    selected: "منتخب",

    // --- ROLES MODULE ---
    add_role: "نیا رول شامل کریں",
    manage_user_roles: "صارف رولز کا انتظام کریں",
    back_to_roles: "رولز پر واپس",
    role_name: "رول کا نام",
    description: "تفصیل",

    // --- PERMISSIONS MODULE ---
    configure_access_rights: "رسائی کے حقوق ترتیب دیں",
    user_overrides: "صارف اووررائیڈز",
    select_user: "صارف منتخب کریں",
    module: "ماڈیول",
    screen: "اسکرین",
    navigate: "نیویگیٹ",
    voucher: "ووچر",
    report: "رپورٹ",
    view: "دیکھیں",
    create: "بنائیں",
    delete: "حذف کریں",
    approve: "منظور کریں",
    post: "پوسٹ کریں",
    approval_settings: "منظوری کی ترتیبات",
    approval_rules: "منظوری کے قواعد",
    requires_approval: "منظوری درکار",
    approval_submitted: "منظوری کی درخواست جمع ہو گئی ہے۔ منظوری کے بعد تبدیلی لاگو ہوگی۔",
    approval_sent: "تبدیلی کی درخواست منظوری کے لیے بھیج دی گئی ہے۔ منظوری کے بعد لاگو ہوگی۔",
    notice: "اطلاع",
    approval_approved: "منظوری کی درخواست منظور ہو گئی ہے۔",
    approval_rejected: "منظوری کی درخواست مسترد کر دی گئی ہے۔",
    approval_request_updated: "Approval request updated.",
    approval_request_updated_detail: "Your pending approval request was updated: {summary}",
    approval_no_changes: "No changes found in approval request.",
    approval_edit_failed: "Unable to update approval request.",
    approval_edit_invalid_payload: "Invalid approval edit payload.",
    approval_edit_no_fields: "No editable fields found in this request.",
    approval_edit_delete_not_allowed: "Delete requests cannot be edited.",
    approval_request_not_found: "منظوری کی درخواست موجود نہیں یا پہلے ہی فیصلہ ہو چکا ہے۔",
    approval_apply_failed: "منظوری ہوگئی لیکن تبدیلی نافذ نہیں ہو سکی۔",
    approval_updates: "آخری لاگ اِن کے بعد: {approved} منظور، {rejected} مسترد۔",
    approval_approved_detail: "آپ کی منظوری کی درخواست منظور ہو گئی: {summary}",
    approval_rejected_detail: "آپ کی منظوری کی درخواست مسترد ہو گئی: {summary}",
    permission_denied: "اجازت نہیں ہے۔",
    error_invalid_id: "غلط شناخت۔",
    error_not_found: "ریکارڈ موجود نہیں۔",
    override_mode_active: "اووررائیڈ موڈ فعال ہے",
    user_overrides_hint: "صرف اسی صارف پر لاگو ہوں گی (رول اجازتیں اووررائیڈ ہونے تک برقرار رہتی ہیں)۔",
    role_changes_global_hint: "رول کی اجازتیں اس رول کے تمام صارفین پر لاگو ہوتی ہیں۔",
    save_permissions: "اجازتیں محفوظ کریں",
    search_permissions: "اجازتیں تلاش کریں...",
    expand_all: "سب کھولیں",
    collapse_all: "سب بند کریں",
    scope_missing: "سکوپ رجسٹری میں موجود نہیں",
    select_target_to_configure: "ترتیب دینے کے لیے ہدف منتخب کریں۔",
    select_user_to_configure: "اجازتوں کے لیے صارف منتخب کریں۔",
    select_role_to_configure: "اجازتوں کے لیے رول منتخب کریں۔",
    choose_role_above: "اوپر سے رول منتخب کریں تاکہ اجازتیں دیکھ اور اپڈیٹ کی جا سکیں۔",
    choose_role_or_user_above: "اجازتیں ترتیب دینے کے لیے اوپر سے رول یا صارف منتخب کریں۔",
    back_to_branches: "برانچز پر واپس",
    edit_branch: "برانچ میں ترمیم کریں",
    branch_code: "برانچ کوڈ",
    unique_identifier_hint: "اس برانچ کے لیے مختصر منفرد کوڈ (مثلاً LHR01)",
    branch_name: "برانچ نام",
    city: "شہر",
    is_active: "فعال ہے",
    active_branch_hint: "غیر فعال برانچز انتخاب میں نہیں آتیں اور ان پر نئے لین دین نہیں ہو سکتے۔",
    save_changes: "تبدیلیاں محفوظ کریں",
    manage_company_locations: "برانچز کے مقامات اور دستیابی کا انتظام کریں",
    add_new_branch: "برانچ شامل کریں",
    code: "کوڈ",
    no_records_found: "کوئی ریکارڈ نہیں ملا۔",
    no_navigate_access_message: "ریکارڈز چھپائے گئے ہیں کیونکہ آپ کے پاس نیویگیٹ اجازت نہیں ہے۔",
    // --- BRAND & AUTH ---
    brand: "چاند ایوا",
    dashboard: "ڈیش بورڈ",
    welcome: "خوش آمدید۔ شروع کرنے کے لئے نیویگیشن سے ماڈیول منتخب کریں۔",
    branch: "برانچ",
    signed_in_as: "بطور داخل",
    logout: "لاگ آؤٹ",
    sign_in: "سائن اِن",
    use_credentials: "جاری رکھنے کے لیے اپنی ERP اسناد استعمال کریں۔",
    username: "صارف نام",
    password: "پاس ورڈ",
    login: "لاگ اِن",
    incorrect_credentials: "غلط صارف نام یا پاس ورڈ۔ دوبارہ کوشش کریں۔",
    user_inactive: "صارف غیر فعال ہے۔ ایڈمن سے رابطہ کریں۔",
    login_failed: "لاگ اِن ناکام۔ دوبارہ کوشش کریں۔",

    // --- MODULES ---
    administration: "انتظامیہ",
    setup: "سیٹ اپ",
    branches: "برانچز",
    users: "صارفین",
    roles: "رولز",
    permissions: "اجازتیں",
    approvals: "منظوری", // Changed
    audit_logs: "سرگرمی لاگ",
    master_data: "ماسٹر ڈیٹا",
    accounts_parties: "اکاؤنٹس اور پارٹیز",
    accounts: "اکاؤنٹس",
    parties: "پارٹیز",
    products: "مصنوعات",
    basic_information: "بنیادی معلومات",
    hr_payroll: "ایچ آر اور پے رول",
    financial: "مالیاتی",
    purchase: "خریداری",
    production: "پروڈکشن",
    inventory: "انوینٹری",
    outward_returnable: "آؤٹ ورڈ اور ریٹرنیبل",
    sales: "سیلز",

    // --- COMMON LABELS ---
    add: "شامل کریں",
    list: "فہرست",
    show: "دکھائیں",
    rows: "قطاریں",
    status: "حالت",
    search: "تلاش",
    all: "سب",
    none: "کوئی نہیں",
    active: "فعال",
    inactive: "غیر فعال",
    sr_no: "سیریل نمبر",
    actions: "عمل",
    no_entries: "کوئی اندراج نہیں۔",
    yes: "ہاں",
    no: "نہیں",
    edit: "ترمیم",
    activate: "فعال کریں",
    deactivate: "غیر فعال کریں",
    permanent_delete: "مستقل حذف",
    confirm: "تصدیق",
    are_you_sure: "کیا آپ کو یقین ہے؟",
    continue: "جاری رکھیں",
    cancel: "منسوخ",
    save: "محفوظ کریں",
    audit: "آڈٹ",
    created: "تخلیق",
    updated: "اپ ڈیٹ",
    enter_details_save: "تفصیلات درج کریں اور محفوظ کریں۔",
    showing: "دکھا رہا ہے",
    to: "تا",
    of: "میں سے",
    entries: "اندراجات",
    download: "ڈاؤن لوڈ",
    print: "پرنٹ",
    filters: "فلٹرز",
    apply: "لاگو کریں",
    clear: "صاف کریں",
    include: "شامل کریں",
    exclude: "خارج کریں",
    select: "منتخب کریں",
    prev: "پچھلا",
    next: "اگلا",
    new: "نیا",
    back_to_list: "فہرست پر واپس",
    date: "تاریخ",
    summary: "خلاصہ",
    details: "Details",
    action: "Action",
    entity: "Entity",
    entity_type: "Entity Type",
    all_branches: "All branches",
    audit_context_details: "Audit Context Details",
    saving: "محفوظ ہو رہا ہے...",
    load_failed: "مواد لوڈ نہیں ہو سکا۔",
    error_saving: "محفوظ کرنے میں خرابی۔",
    error_generic: "خرابی۔",
    generic_error: "خرابی۔",
    error_record_in_use: "یہ ریکارڈ دوسرے ڈیٹا سے منسلک ہے اور حذف نہیں کیا جا سکتا۔",
    error_duplicate_record: "اسی تفصیل کے ساتھ ریکارڈ پہلے سے موجود ہے۔",
    error_invalid_value: "ایک یا زیادہ قدریں درست نہیں ہیں۔",
    ok: "ٹھیک ہے",
    unexpected_response: "غیر متوقع جواب",
    network_error: "نیٹ ورک خرابی۔ دوبارہ کوشش کریں۔",

    // --- SKU & MATRIX SPECIFIC ---
    skus: "ایس کے یو",
    skus_description: "SKU ویریئنٹس اور قیمتوں کا انتظام۔",
    check_availability: "دستیابی چیک کریں",
    no_new_combinations: "تمام منتخب کردہ مجموعے پہلے سے موجود ہیں۔",
    new_combinations_found: "نئے مجموعے مل گئے۔",
    sale_rate: "سیل ریٹ",
    sku_code: "SKU کوڈ",
    barcode: "بارکوڈ",
    size: "سائز",
    color: "رنگ",
    grade: "گریڈ",
    packing_type: "پیکنگ ٹائپ",
    article: "آرٹیکل",
    rates: "ریٹس",

    // --- APPROVALS & STATUSES ---
    pending: "زیر التواء",
    approved: "منظور شدہ",
    rejected: "مسترد شدہ",
    unknown: "نامعلوم",
    requester: "درخواست کنندہ",
    old_rate: "پرانا ریٹ",
    new_rate: "نیا ریٹ",
    approve: "منظور کریں",
    reject: "مسترد کریں",
    rate_change_submitted: "ریٹ میں تبدیلی منظوری کے لیے جمع کر دی گئی ہے۔",
    request_approved: "درخواست منظور ہو گئی۔",
    request_rejected: "درخواست مسترد ہو گئی۔",
    pair_rate: "جوڑی ریٹ",
    dozen_rate: "درجن ریٹ",
    variants: "اقسام",
    add_new_combinations: "نئی اقسام شامل کریں",
    variants_sent_approval: "اقسام منظوری کے بعد شامل کی جائیں گی۔",

    // --- ERRORS & MESSAGES ---
    saved_successfully: "کامیابی سے محفوظ ہو گیا۔",
    error_required_fields: "تمام ضروری خانے پُر کریں۔",
    error_unable_save: "محفوظ نہیں ہو سکا۔ ڈپلیکیٹ یا غلط ڈیٹا چیک کریں۔",
    error_immutable_field: "جسمانی خصوصیات تبدیل نہیں کی جا سکتیں۔ اس کے بجائے نیا SKU بنائیں۔",
    error_update_status: "اس کی حالت تبدیل نہیں ہو سکی۔ یہ آئٹم استعمال میں ہو سکتا ہے۔",
    error_delete: "حذف نہیں ہو سکا۔ یہ آئٹم استعمال میں ہو سکتا ہے۔",
    error_duplicate_code: "کوڈ پہلے سے موجود ہے۔",
    error_duplicate_name: "نام پہلے سے موجود ہے۔",

    // --- EXISTING KEYS (Preserved) ---
    units: "یونٹس",
    groups: "گروپس",
    party_groups: "پارٹی گروپس",
    account_groups: "اکاؤنٹ گروپس",
    account_type: "اکاؤنٹ ٹائپ",
    account_group: "اکاؤنٹ گروپ",
    account_code: "اکاؤنٹ کوڈ",
    account_name: "اکاؤنٹ نام",
    lock_posting: "پوسٹنگ لاک",
    party_type: "پارٹی ٹائپ",
    party_group: "پارٹی گروپ",
    party_code: "پارٹی کوڈ",
    party_name: "پارٹی نام",
    address: "پتہ",
    phone_1: "فون 1",
    phone_2: "فون 2",
    city: "شہر",
    customer: "کسٹمر",
    supplier: "سپلائر",
    credit_allowed: "ادھار کی اجازت",
    credit_limit: "ادھار حد",
    departments: "محکمے",
    product_groups: "پروڈکٹ گروپس",
    product_subgroups: "پروڈکٹ سب گروپ",
    product_types: "پروڈکٹ ٹائپس",
    sizes: "سائزز",
    colors: "رنگ",
    grades: "گریڈز",
    packing_types: "پیکنگ ٹائپس",
    cities: "شہر",
    uom_conversions: "یو او ایم کنورژنز",
    finished: "فنشڈ",
    semi_finished: "سیمی فنشڈ",
    raw_materials: "خام مال",
    semi_finished_goods: "نیم تیار مال",
    finished_goods: "تیار شدہ مال",
    article_name: "آرٹیکل نام",
    group: "گروپ",
    sub_group: "ذیلی گروپ",
    base_unit: "بنیادی یونٹ",
    category: "قسم",
    uses_sfg: "سیمی فِنشڈ استعمال",
    sfg_part: "SFG حصہ",
    sfg_part_type: "SFG حصہ کی قسم",
    upper: "اپر",
    step: "اسٹیپ",
    color_rates: "رنگ ریٹس",
    avg_purchase_rate: "اوسط خریداری ریٹ",
    min_stock: "کم از کم اسٹاک",
    sizes_label: "سائز",
    usage: "استعمال",
    expanded: "تفصیل",
    one_color: "ایک رنگ",
    one_size: "ایک سائز",
    only: "صرف",
    variant_id: "ویریئنٹ آئی ڈی",
    purchase_rate: "خریداری ریٹ",
    sizes_help: "اس سیمی فِنشڈ آئٹم کے لیے ایک یا زیادہ سائز منتخب کریں۔",
    finished_description: "فنشڈ آرٹیکلز، کیٹیگریز، اور SFG استعمال کی سیٹنگز۔",
    semi_finished_description: "سیمی فِنشڈ آئٹمز اور متعلقہ سائزز کا انتظام۔",
    raw_materials_description: "خام مال کے لیے رنگ وار خریداری ریٹس کے ساتھ اندراج۔",
    bom: "بی او ایم",
    bom_list: "بی او ایم فہرست",
    bom_versions: "ورژنز",
    bom_approval: "منظوری",
    bom_description: "گلوبل بی او ایم ڈرافٹس، منظوری اور ورژنز کا انتظام کریں۔",
    bom_new_title: "Add BOM",
    bom_edit_title: "بی او ایم میں ترمیم",
    bom_header: "بی او ایم ہیڈر",
    bom_output_qty: "آؤٹ پٹ مقدار",
    bom_tab_rm: "خام مال",
    bom_tab_sfg: "سیمی فِنشڈ مصنوعات",
    bom_tab_labour: "لیبر",
    bom_tab_variant_rules: "ویریئنٹ رولز",
    bom_rm_rules_size_wise: "خام مال رولز سائز وائز",
    bom_header_required_message: "سب سے پہلے BOM Header مکمل کریں۔ باقی سیکشنز اس پر منحصر ہیں۔",
    all_sizes: "تمام سائز",
    quantity: "مقدار",
    bom_normal_loss_pct: "نارمل لاس %",
    bom_create_new_version: "نیا ورژن بنائیں",
    bom_version_created: "نیا ورژن تیار ہو گیا۔",
    bom_versions_description: "آئٹم اور لیول کے حساب سے ورژن ہسٹری اور اسٹیٹس دیکھیں۔",
    bom_specific: "مخصوص",
    scope: "اسکوپ",
    level: "لیول",
    version: "ورژن",
    save_draft: "ڈرافٹ محفوظ کریں",
    send_for_approval: "منظوری کے لئے بھیجیں",
    department: "ڈیپارٹمنٹ",
    bom_rule_add_rm: "خام مال شامل کریں",
    bom_rule_remove_rm: "خام مال ہٹائیں",
    bom_rule_replace_rm: "خام مال تبدیل کریں",
    bom_rule_adjust_qty: "مقدار ایڈجسٹ کریں",
    bom_rule_change_loss: "لاس تبدیل کریں",
    bom_error_item_required: "براہ کرم آئٹم منتخب کریں۔",
    bom_error_level_required: "براہ کرم درست لیول منتخب کریں۔",
    bom_error_output_qty_required: "آؤٹ پٹ مقدار صفر سے زیادہ ہونی چاہیے۔",
    bom_error_output_uom_required: "آؤٹ پٹ یو او ایم ضروری ہے۔",
    bom_error_item_not_found: "منتخب آئٹم موجود نہیں۔",
    bom_error_level_item_mismatch: "منتخب لیول آئٹم ٹائپ سے میل نہیں کھاتا۔",
    bom_error_rm_line_invalid: "خام مال لائن درست نہیں۔",
    bom_error_rm_item_invalid: "خام مال لائن میں صرف RM آئٹم ہونا چاہیے۔",
    bom_error_rm_uom_required: "خام مال کے لئے یو او ایم ضروری ہے۔",
    bom_error_loss_pct_invalid: "نارمل لاس % صفر سے 100 کے درمیان ہونا چاہیے۔",
    bom_error_sfg_not_allowed_for_sfg_level: "سیمی فِنشڈ لیول کے بی او ایم میں SFG لائن شامل نہیں ہو سکتی۔",
    bom_error_sfg_line_invalid: "سیمی فِنشڈ لائن درست نہیں۔",
    bom_error_sfg_item_invalid: "منتخب SKU سیمی فِنشڈ آئٹم کا ہونا چاہیے۔",
    bom_error_sfg_uom_required: "SFG یو او ایم ضروری ہے۔",
    bom_error_sfg_requires_approved_bom: "منتخب SFG آئٹم کا منظور شدہ بی او ایم موجود نہیں۔",
    bom_error_labour_line_invalid: "لیبر لائن درست نہیں۔",
    bom_error_labour_rate_type_invalid: "لیبر ریٹ ٹائپ درست نہیں۔",
    bom_error_size_required_for_specific_scope: "مخصوص اسکوپ کے لئے سائز ضروری ہے۔",
    bom_error_packing_required_for_specific_scope: "مخصوص اسکوپ کے لئے پیکنگ ٹائپ ضروری ہے۔",
    bom_error_color_required_for_specific_scope: "مخصوص اسکوپ کے لئے رنگ ضروری ہے۔",
    bom_error_material_required_for_specific_scope: "مخصوص اسکوپ کے لئے ٹارگٹ میٹیریل ضروری ہے۔",
    bom_error_variant_action_invalid: "ویریئنٹ ایکشن ٹائپ درست نہیں۔",
    bom_error_missing_material_rates: "ضروری میٹیریل ریٹس دستیاب نہیں۔",
    bom_error_missing_material_rates_detail: "ان آئٹمز کے فعال خریداری ریٹس موجود نہیں",
    bom_error_draft_exists: "اس آئٹم اور لیول کے لئے ڈرافٹ پہلے سے موجود ہے۔",
    bom_error_only_draft_editable: "صرف ڈرافٹ بی او ایم میں ترمیم ہو سکتی ہے۔",
    bom_error_approve_requires_draft: "صرف ڈرافٹ بی او ایم منظور ہو سکتا ہے۔",
    bom_error_new_version_requires_approved: "نیا ورژن صرف منظور شدہ بی او ایم سے بنایا جا سکتا ہے۔",
    bom_error_already_pending: "اس بی او ایم کے لئے منظوری پہلے سے زیر التواء ہے۔",
    employees: "ملازمین",
    sales_commission: "سیلز کمیشن",
    allowances: "الاؤنسز",
    labours: "لیبرز",
    labour_rates: "لیبر ریٹس",
    employees_description: "Employees master records manage کریں۔",
    labours_description: "Labours master records manage کریں۔",
    sales_commission_description: "Employee wise sales commission rules setup یہاں ہوگا۔",
    allowances_description: "Employee allowance rules setup یہاں ہوگا۔",
    labour_rates_description: "Labour rates rules یہاں configure ہوں گے۔",
    hr_screen_description: "HR اور payroll setup کو universal approvals workflow کے ساتھ manage کریں۔",
    hr_screen_planned_note: "یہ screen path active ہے اور permissions کے ساتھ connected ہے۔",
    requirement_ref: "Requirement Ref",
    screen: "Screen",
    id: "ID",
    name: "نام",
    cnic: "CNIC",
    phone_number: "فون نمبر",
    designation_role: "Designation / Role",
    payroll_type: "Payroll Type",
    payroll_monthly: "Monthly",
    payroll_daily: "Daily",
    payroll_piece_rate: "Piece Rate",
    payroll_multiple: "Multiple",
    basic_salary: "Basic Salary",
    production_category: "Production Category",
    production_category_finished: "Finished",
    production_category_semi_finished: "Semi-Finished",
    placeholder_employee_code: "EMP-001",
    placeholder_employee_name: "Ali Raza",
    placeholder_labour_code: "LAB-001",
    placeholder_labour_name: "Rafiq",
    placeholder_employee_cnic: "35202-1234567-1",
    placeholder_phone_number: "0300-0000000",
    placeholder_designation_role: "Sales Officer",
    error_invalid_payroll_type: "Invalid payroll type selected.",
    error_invalid_salary: "Basic salary must be a non-negative number.",
    error_invalid_status: "Invalid status selected.",
    error_branch_out_of_scope: "منتخب branch آپ کی اجازت سے باہر ہے۔",
    error_invalid_production_category: "Invalid production category selected.",
    error_invalid_salary_precision: "Basic salary supports up to 2 decimal places and valid range only.",
    error_select_department: "براہ کرم department منتخب کریں۔",
    error_invalid_cnic: "Invalid CNIC format.",
    error_invalid_phone_number: "Invalid phone number format.",
    error_duplicate_cnic: "CNIC پہلے سے موجود ہے۔",
    error_duplicate_phone_number: "Phone number پہلے سے موجود ہے۔",
    apply_on: "Apply On",
    apply_on_sku: "Article (SKU)",
    apply_on_subgroup: "Product Sub-Group",
    apply_on_group: "Product Group",
    apply_on_all: "All Products (Flat)",
    apply_on_flat: "Flat",
    target_type: "Target Type",
    target: "Target",
    impact: "Impact",
    affected_skus: "Affected SKUs",
    applies_to_labours: "ان لیبرز پر لاگو ہوگا",
    no_labours_found_for_department: "منتخب department کے لیے کوئی active labour نہیں ملا۔",
    expand: "کھولیں",
    collapse: "سمیٹیں",
    select_target_to_preview_impact: "Select a target to preview impact.",
    resolved_from: "Resolved From",
    overridden: "Overridden",
    applied: "Applied",
    product_scope: "Product Scope",
    coverage_scope_fg: "Finished",
    coverage_scope_sfg: "Semi-Finished",
    coverage_scope_both: "Both",
    item_selector: "Item Selector",
    commission_basis: "Commission Basis",
    commission_basis_net_sales_percent: "% of Net Sales",
    commission_basis_gross_margin_percent: "% of Gross Margin",
    commission_basis_fixed_per_unit: "Fixed per Basic Unit",
    commission_basis_fixed_per_invoice: "Fixed per Invoice",
    rate: "Rate",
    previous_dozen_rate: "پچھلا درجن ریٹ",
    new_dozen_rate: "نیا درجن ریٹ",
    previous_rate: "Previous Rate",
    new_rate: "New Rate",
    value_type: "Value Type",
    value_type_percent: "Percent",
    value_type_fixed: "Fixed",
    value: "Value",
    reverse_on_returns: "Reverse on Returns",
    allowance_type: "Allowance Type",
    amount_type: "Amount Type",
    amount_type_fixed: "Fixed",
    amount_type_percent_basic: "% of Basic",
    amount: "Amount",
    frequency: "Frequency",
    frequency_monthly: "Monthly",
    frequency_daily: "Daily",
    taxable: "Taxable",
    applies_to_all_labours: "Apply to All Labours",
    rate_type: "Rate Type",
    rate_type_per_dozen: "Per Dozen",
    rate_type_per_pair: "Per Pair",
    rate_value: "Rate Value",
    batch_dozen_rates: "Batch Dozen Rates",
    article_type: "Article Type",
    article_type_fg: "Finished Goods (FG)",
    article_type_sfg: "Semi-Finished Goods (SFG)",
    all_labours: "تمام لیبرز",
    load_skus: "Load SKUs",
    current_dozen_rate: "Current Dozen Rate",
    new_dozen_rate: "New Dozen Rate",
    row_notes: "Row Notes",
    effective_from: "Effective From",
    effective_to: "Effective To",
    apply_rate_to_selected: "Apply To Selected",
    filter_primary: "Primary Filter",
    filter_secondary: "Secondary Filter",
    error_invalid_apply_on: "Invalid apply-on selection.",
    error_invalid_commission_basis: "Invalid commission basis selected.",
    error_invalid_value_type: "Invalid value type selected.",
    error_invalid_rate_type: "Invalid rate type selected.",
    error_select_rate_type: "براہ کرم rate type منتخب کریں۔",
    error_invalid_rate_value: "Invalid value. Enter a non-negative number with up to 2 decimals.",
    error_select_article_type: "براہ کرم article type منتخب کریں۔",
    error_invalid_article_type: "Invalid article type selected.",
    error_select_commission_basis: "براہ کرم commission basis منتخب کریں۔",
    error_action_not_allowed: "یہ کارروائی اجازت یافتہ نہیں ہے۔",
    error_select_sku: "براہ کرم article (SKU) منتخب کریں۔",
    error_select_subgroup: "براہ کرم product sub-group منتخب کریں۔",
    error_select_group: "براہ کرم product group منتخب کریں۔",
    error_select_labour: "براہ کرم labour منتخب کریں۔",
    error_duplicate_labour_rate_rule: "اس Labour + Department + SKU کے لیے labour rate پہلے سے موجود ہے۔",
    error_duplicate_commission_rule: "اسی نوعیت کا commission rule پہلے سے موجود ہے۔",
    error_group_subgroup_only_for_bulk_commission: "اس اسکرین میں Product Group/Sub-Group اپڈیٹ صرف SKU preview اور bulk save کے ذریعے ہوگا۔",
    error_invalid_bulk_commission_payload: "Commission payload درست نہیں ہے۔",
    error_group_subgroup_only_for_bulk_labour_rate: "اس اسکرین میں Product Group/Sub-Group labour rates اپڈیٹ صرف SKU preview اور bulk save کے ذریعے ہوگا۔",
    error_invalid_bulk_labour_rate_payload: "Labour rate payload درست نہیں ہے۔",
    error_no_target_skus_found: "منتخب Product Group/Sub-Group کے لیے کوئی SKU نہیں ملا۔",
    success_bulk_commission_saved: "متاثرہ SKUs کی sales commission کامیابی سے محفوظ ہو گئی۔",
    success_bulk_commission_saved_counts: "Created: {created}, Updated: {updated}.",
    success_bulk_labour_rate_saved: "متاثرہ SKUs کی labour rates کامیابی سے محفوظ ہو گئیں۔",
    success_bulk_labour_rate_saved_counts: "Created: {created}, Updated: {updated}.",
    view_pending_approval: "زیر التواء منظوری دیکھیں",
    error_invalid_amount_type: "Invalid amount type selected.",
    error_invalid_frequency: "Invalid frequency selected.",
    error_duplicate_allowance_rule: "اس employee کے لئے یہ allowance پہلے سے موجود ہے۔",
    placeholder_allowance_type: "House, Conveyance, Mobile",
    vouchers: "ووچرز",
    cash_voucher: "کیش ووچر",
    bank_voucher: "بینک ووچر",
    journal_voucher: "جرنل ووچر",
    reports: "رپورٹس",
    financial_reports: "مالیاتی رپورٹس",
    purchase_invoice: "خریداری انوائس",
    purchase_order: "خریداری آرڈر",
    purchase_return: "خریداری ریٹرن",
    purchase_reports: "خریداری رپورٹس",
    abnormal_loss: "غیر معمولی نقصان",
    production_reports: "پروڈکشن رپورٹس",
    inventory_voucher: "انوینٹری ووچر",
    stock_count: "اسٹاک کاؤنٹ",
    stock_transfer: "اسٹاک ٹرانسفر",
    inventory_reports: "انوینٹری رپورٹس",
    returnables: "ریٹرنیبلز",
    returnable_reports: "ریٹرنیبل رپورٹس",
    sales_voucher: "سیلز ووچر",
    sales_order: "سیلز آرڈر",
    sales_reports: "سیلز رپورٹس",
    tooltip_account_type: "بنیادی اکاؤنٹنگ درجہ بندی (اثاثہ، ذمہ داری، سرمایہ، آمدنی، خرچ)۔",
    tooltip_code: "رپورٹس اور فلٹرنگ کے لیے مختصر کوڈ۔",
    tooltip_contra: "اپنے والد گروپ کے بیلنس کو آف سیٹ کرتا ہے۔",
    help_unit_code: "سسٹم میں استعمال ہونے والا مختصر منفرد کوڈ (مثلاً PCS, KG).",
    help_unit_name: "رپورٹس اور دستاویزات میں دکھایا جانے والا وضاحتی نام۔",
    language: "زبان",
    english: "انگریزی",
    translation_fetching: "Fetching translation...",
    translation_idle: "Click Auto Translate to fill Urdu name",
    translation_ready: "Translated",
    translation_failed: "Translation unavailable",
    urdu: "اردو",
  },
};

module.exports = (req, res, next) => {
  const cookies = parseCookies(req);
  const requested = (req.query && req.query.lang) || cookies.lang || (req.headers["accept-language"] || "").split(",")[0];
  const normalized = (requested || "en").toLowerCase();
  const locale = normalized.startsWith("ur") ? "ur" : "en";

  if (req.query && req.query.lang) {
    setCookie(res, "lang", locale, {
      path: "/",
      sameSite: "Lax",
      maxAge: 60 * 60 * 24 * 365,
    });
  }

  req.locale = locale;
  res.locals.locale = locale;
  res.locals.t = (key) => translations[locale][key] || translations.en[key] || key;
  next();
};
