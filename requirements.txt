ERP FOR A SHOE MANUFACTURING COMPANY
(MULTIPLE BRANCHES)
TECHNOLOGIES:
NODE.JS
EXPRESS
EJS
POSTGRESQL (KNEX)
TAILWIND
SPECIFICATIONS
IMPORTANT:
1.	UI should be branch specific
2.	User should be able to use the website on phones along with laptop / desktop without compromise on usability and user-interface 
3.	The website could be translated into URDU - FULLY LOCALIZE ALL PAGES
4.	If audit freeze is used, no voucher could be edited/created/deleted before that time period!
5.	There should be an option for date range for all reports
1. ADMINISTRATION
1.0 Branches (add/edit a branch)
1.1 User Management
‚Ä¢	Add / Edit / Disable User
o	Username
o	Password (encrypted)
o	User Type (Admin, Manager, Storekeeper, Salesman, Accounts, Production)
o	Assigned Branch(es) (single or multiple)
o	Status (Active / Inactive)
Rule:
User can only view & operate data of assigned branches.
1.2 User Rights 
‚Ä¢	Permission control at:
o	Module level
o	Screen level
o	Voucher level
o	Report level
‚Ä¢	Rights:
o	View
o	Create
o	Edit
o	Delete
o	Approve (for addition/editing of products, party, account, labour rates information)
1.3	Pending Approvals
Shows the list of pending approvals along with option to accept or reject.
1.4	Activity Log 
‚Ä¢	Logs:
o	User
o	VOUCHER TYPE/ INFORMATION TYPE
o	IF VOUCHER THEN VOUCHER NO
o	Action
o	Date / Time
o	IP (optional)
This applies to:
‚Ä¢	Rate changes
‚Ä¢	Stock adjustments
‚Ä¢	Voucher edits/deletes/creates
‚Ä¢	Permissions changes
NOTE: FOR ALL DATA ENTRIES, CREATED BY AND CREATED ON WILL BE ADDED BY DEFAULT IN VOUCHERS EG PRODUCT ENTRIES OR VOUCHER ENTRIES. ALSO, 
‚Ä¢	Add role templates (prebuilt roles: Storekeeper, Sales, Accounts‚Ä¶) so rights are not assigned manually every time.
‚Ä¢	Add 2FA / password policy (min length, expiry optional), and session timeout.
‚Ä¢	Add maker-checker rules (e.g., ‚Äúcreator can‚Äôt approve own change‚Äù for rates/stock adjustments).

2. MASTER DATA ( BASE SETUP)
2.1 Accounts & Parties
Account Information
‚Ä¢	Code
‚Ä¢	Account Name
‚Ä¢	Account Type (Expense / Income / Asset / Liability / Capital)
‚Ä¢	Group (Electricity, Rent, Tax, Salary, Fuel etc.)
‚Ä¢	Branch/es (Accounts could be allocated to multiple branches or a single branch as decided by the user on time of creation. )
Party Information
‚Ä¢	Code
‚Ä¢	Name
‚Ä¢	Party Type (Customer / Supplier )
‚Ä¢	Address
‚Ä¢	Phone 1 / Phone 2
‚Ä¢	City
‚Ä¢	Party Group
‚Ä¢	Credit Allowed (yes/no)
‚Ä¢	Credit Limit
NOTE: A CUSTOMER MUST EXIST HERE TO CREATE A SALES VOUCHER (LOAN SALE) AND SALES ORDER (PENDING PAYMENT)
 2.2 Products
‚Ä¢	BASIC INFORMATION 
o	Units (FINISHED/SEMI-FINISHED/RAW-MATERIAL)
o	Groups (FINISHED/SEMI-FINISHED/RAW-MATERIAL)
o	Sizes 
o	Colors 
o	Grades
o	Packing Types
o	Global UOM + Packing Status Rule (one-time definition): Global Rule: Unit and Quantity by Stock Status -> For finished/semi-finished SKUs, stock status determines unit: PACKED ‚áí Unit = DOZEN (locked), LOOSE ‚áí Unit = PAIR (locked). Quantity validation: If PACKED: Quantity must be in increments of 0.5 and Quantity √ó 12 must be an integer. If LOOSE: Quantity must be an integer. System stores TotalPairs as an integer for all postings, calculated as: PACKED: TotalPairs = Quantity √ó 12, LOOSE: TotalPairs = Quantity - This makes it global and reusable.
‚Ä¢	Raw Materials
Field	Description
Code	Unique raw material code
Name	Material name (Leather, EVA, Thread, etc.)
Group	Category of material
Unit	Unit of measurement (Meter / Pair / Kg)
Colors	Black/Mix (for EVA dana ‚Äì different colors have different rates)
Purchase Rate	Rate for each color per unit (must ask for approval from admin before changing it by specifying new and old value)(use it for purchase vouchers only)
Average Purchase Rate	System-calculated weighted average (USE WEIGHTED AVERAGE COST - FREEZE)
Minimum Stock Level	Stock alert threshold

‚Ä¢	Semi-Finished Products
Field	Description
Code	Unique semi-finished item code
Name	700 EVA SLIPPER 
Sizes	7/10,9/10 etc
Group	Category of semi-finished item (eg UPPER/STEP) 
Unit	Unit of measurement (Pair / Dozen)
Usage	Can be used in multiple finished products

‚Ä¢	Finished Products
Article Information
Field	Description
Article Code	Unique article code (e.g., 700)
Article Name	Product name (e.g., EVA Slipper)
Group	Category (EVA/PU)
Sub Group	Eg Ballman, Boots etc
Base Unit	Pair / Dozen
Category	Males/Females/Kids
Variant Information
Field	Description
Variant ID	Unique ID for size/grade/color combination
Article Code	Parent article
Size	Size or size range
Grade	A / B / C etc.
Color	Optional
Packing Type	Thaili / Box / etc.
Sale Rate	Sale price for this variant (must ask for approval from admin before changing/editing by specifying new and old value)
Active	Enable / disable variant

‚Ä¢	SKU Table
‚Ä¢	Field	Description
SKU Code	System-generated unique SKU for variant (e.g., 700-EVA-KIDZ-1/3-A)
Variant ID	Linked variant
Barcode	Optional, can be added later
Active	Enable / disable SKU
             PS- Barcode scanning can be integrated later ‚Äî no need to block ERP now. 
NOTE: Audit Trail log. If a user changes a "Sale Rate" from 500 to 450, the system must log User X changed Rate on [Date/Time] 
ALSO, global SKUs but branch stock is separate. 
2.3 BOM (for finished + semi finished)
2.3.1 CREATE / MAINTAIN BOM
A. BOM HEADER (System-Controlled + User Inputs)
Field	Behavior
BOM No	Auto-generated, system-controlled, locked
Article Name	User selects
Level	User selects: Finished / Semi-Finished
Output Quantity	User enters numeric value
Output Unit	System / dropdown (PCS / Dozen / Kg etc.)
Status	System-controlled: Draft / Pending / Approved
Version	System-generated (V1, V2, V3‚Ä¶), locked
Created By	System-controlled
Creation Date	System-controlled
Approved By	System-controlled
Approval Date	System-controlled

B. LOAD / VERSION BEHAVIOR (VERY IMPORTANT)
At the top of the screen, after Article + Level selection, show these buttons:
1Ô∏è‚É£ LOAD
When user clicks LOAD, system behaves as follows:
Existing BOM State	What LOAD Does
Draft exists	Load Draft in EDIT MODE
Pending exists (no draft)	Load Pending in VIEW MODE 
Only Approved exists	Load Approved in VIEW MODE
‚ö†Ô∏è LOAD never edits an Approved BOM
2Ô∏è‚É£ CREATE NEW VERSION
Visible only when an Approved BOM exists.
‚Ä¢	Copies latest Approved BOM
‚Ä¢	Creates new Draft version (V+1)
‚Ä¢	Opens in EDIT MODE
‚Ä¢	Old Approved version remains locked forever
C. ACTION BUTTONS (TOP-RIGHT OF HEADER)
Button	Visibility	Action
Save Draft	Draft only	Saves without locking
Send for Approval	Draft only	Status ‚Üí Pending
Approve / Reject	Admin only	Locks BOM

D. HORIZONTAL NAV BAR (BOM DETAILS)
Tabs appear only when BOM is in Draft or View mode.
1Ô∏è‚É£ RAW MATERIALS TAB
Rows contain:
‚Ä¢	Code (auto)
‚Ä¢	Raw Material (dropdown)
‚Ä¢	Color (eg. EVA Dana ‚Äì black/mix)
‚Ä¢	Department ( Dropdown ‚Äì Select One - Mandatory)
‚Ä¢	Quantity
‚Ä¢	Unit (auto from material master, locked)
‚Ä¢	Normal Loss %
üìå Quantity = Base quantity (loss applied during costing)
2Ô∏è‚É£ SEMI-FINISHED PRODUCTS TAB
Rules enforced:
‚Ä¢	Only items with Approved BOM appear in dropdown
‚Ä¢	Semi-finished BOM version reference is stored automatically
Rows contain:
‚Ä¢	Code (auto)
‚Ä¢	Semi-Finished Item (dropdown)
‚Ä¢	Required Quantity
‚Ä¢	Unit (locked)
‚Ä¢	Referenced BOM Version (hidden/system)
üö´ Cannot save BOM if selected semi-finished item has no approved BOM
3Ô∏è‚É£ LABOURS TAB
Rows contain:
‚Ä¢	Size applicability (All / Specific - Dropdown)
‚Ä¢	Department ( Dropdown ‚Äì Select One - Mandatory)
‚Ä¢	Labour Name (dropdown)
‚Ä¢	Rate (per dozen / per piece)
‚Ä¢	Total (auto-calculated based on output quantity in header)
üö´ Total is never user-editable
4Ô∏è‚É£ VARIANT RULES TAB

Variant dimensions (dropdowns):
‚Ä¢	Size: All / Specific
‚Ä¢	Packing: All/ Carton / Thaili / etc.
‚Ä¢	Color: All / Specific
Rule actions (one row per rule):
‚Ä¢	Action Type:
o	Add Raw Material
o	Remove Raw Material
o	Replace Raw Material
o	Adjust Quantity (% / Fixed)
o	Change Loss %
‚Ä¢	Material Scope:
o	All Materials
o	Material Group
o	Single Material
‚Ä¢	New Quantity / % / Loss value
2.3.2 BOM Reports
1)	BOM COST AND MARGIN REGISTER
Column Name	Explanation / Source
Article Code	Auto-fetched from Item Master
Article Name	Finished Product Name from Item Master
Product Level	Finished/Semi-Finished
Size if any	All sizes variants for the article
Color if any	All color variants for the article
Packaging if any	All packaging variants for the article
BOM Version 	Latest Approved BOM version only (V1/V2/V3 etc)
Labour Cost per Unit	Auto-calculated; labour component extracted from BOM
Raw Material Cost / Unit	Raw material consumption cost from BOM
Semi-Finished Cost / Unit	Cost of semi-finished inputs used
Total Manufacturing Cost / Unit 	As per selected BOM - Raw + Semi-Finished + Labour (includes packaging cost implicitly when packaging-specific BOM exists)
Selling Price / Unit	Fetched from Price List / Product Information (if semi-finished then same as manufacturing cost)
Profit per Unit	Selling Price ‚àí Total Manufacturing Cost
Profit Margin %	(Profit √∑ Selling Price) √ó 100

üìå Only APPROVED BOMs appear in this report
Filters (very important)
‚Ä¢	Article (single / group/ category/ all by default)
‚Ä¢	Product Level (finished/semi-finished)
‚Ä¢	Packing 
‚Ä¢	Sizes
‚Ä¢	Profit Range (min‚Äìmax)
‚Ä¢	Profit Margin %

2)	Pending BOM Approval & Change Log ‚Äî Structure
Column	Explanation
Article Code	From Item Master
Article Name	Product Name
Product Level	Finished / Semi-Finished
Old BOM Version	Last Approved Version Number
New BOM Version	Pending Version Number
Change Type	Material / Labour / Semi-Finished
Change Summary	Auto-generated text (e.g. ‚ÄúRaw Cotton Qty +5%‚Äù)
Old BOM Cost / Unit	From last approved BOM
New BOM Cost / Unit	From pending BOM
Cost Difference	New ‚àí Old
Cost Impact %	(Difference √∑ Old Cost) √ó 100
Requested By	User
Requested Date	Date
Approval Status	Pending
Approval Action	Approve / Reject

Filter:  Level (finished/semi-finished)
3)	BOM VERSION HISTORY REPORT (AUDIT REPORT) ‚ÄúWhat changed, when, and who approved it?‚Äù
Column Name	Explanation / Source
Article Code	From Item Master
Article Name	From Item Master
Product Level	Finished / Semi-Finished
Variant ‚Äì Size	Size variant (if applicable)
Variant ‚Äì Color	Color variant (if applicable)
Variant ‚Äì Packaging	Packaging variant (if applicable)
BOM Version	Version number (V1, V2, V3‚Ä¶)
Previous BOM Version	Immediate previous version (for reference)
Change Summary	Auto-generated aggregated summary for this version
Old BOM Cost / Unit	Cost per unit from previous approved version
New BOM Cost / Unit	Cost per unit for this version
Cost Difference	New ‚àí Old
Cost Impact %	(Difference √∑ Old Cost) √ó 100
Created By	User who created this version
Approved By	Approving authority
Approval Date	Approval timestamp

üéØ Filters
‚Ä¢	Article (All / Single / Group / Sub-Group)
‚Ä¢	Product Level
‚Ä¢	Date Range
‚Ä¢	Status (optional, admin-only)
4)	SEMI-FINISHED DEPENDENCY REPORT ‚ÄúWhere is this semi-finished item used?‚Äù
Shows:
‚Ä¢	Semi-finished item
‚Ä¢	All finished BOMs using it
‚Ä¢	Referenced BOM version
Note: All products must be approved from admin before showing the changes to everybody else. Keep the changes in pending approval list!

3. HR & PAYROLL
3.1 Employees
3.1.1 Add Employee
‚Ä¢	Code
‚Ä¢	Name
‚Ä¢	CNIC
‚Ä¢	Phone Number
‚Ä¢	Department
‚Ä¢	Designation/Role
‚Ä¢	Payroll Type (monthly/daily/piece-rate/multiple)
‚Ä¢	Basic Salary
‚Ä¢	Branch/Branches 
‚Ä¢	Status (Active/Inactive)
3.1.2	Add Sales Commission
A) Commission Rule Header
‚Ä¢	Salesman (select through employees dropdown)
‚Ä¢	Creation Date
B) Commission Rule Lines (per row)
Fields per row:
‚Ä¢	Apply On (dropdown):
o	Article (SKU) ‚úÖ
o	Product Sub-Group
o	Product Group
o	All Products (Flat)
‚Ä¢	Item Selector (dropdown/search)
(Shows SKU / Sub-group / Group based on ‚ÄúApply On‚Äù; blank if Flat)
‚Ä¢	Commission Basis (dropdown):
o	% of Net Sales ‚úÖ (recommended default)
o	% of Gross Margin (advanced)
o	Fixed Amount per Unit (per invoice line)
o	Fixed Amount per Invoice
‚Ä¢	Value Type (dropdown): % / Fixed
‚Ä¢	Value (e.g., 2.5% or Rs 80)
‚Ä¢	Reverse on returns? (Yes/No ‚Äì By Default yes)‚Äù
BY DEFAULT, FOR EACH SALESMAN, THE MORE SPECIFIC COMMISSION WOULD BE APPLIED EG PRODUCT PRIORITY>SUB-GROUP>GROUP>FLAT-RATE. NEW VOUCHERS OVERRIDES OLDER ONES!
3.1.3 Add Allowances
Fields per row:
‚Ä¢	Allowance Type (dropdown)
(House, Conveyance, Mobile, Food, Attendance, Shift, etc.)
‚Ä¢	Amount Type (Fixed / % of Basic)
‚Ä¢	Amount (e.g., 8000 or 10%)
‚Ä¢	Frequency (Monthly / Daily) (optional but useful)
‚Ä¢	Taxable? (Yes/No) (optional for now, but recommended)
3.2 Labours
3.2.1 Add Labour
‚Ä¢	Code
‚Ä¢	Name 
‚Ä¢	CNIC
‚Ä¢	Production category (finished/semi-finished) 
‚Ä¢	Department
‚Ä¢	Phone Number
‚Ä¢	Branch/Branches
‚Ä¢	Status (Active/Inactive)
3.2.2 Labour Rates Setup
Header 
‚Ä¢	Labour Selection Dropdown (name/all)
‚Ä¢	Department (cutting/stitching etc)
‚Ä¢	Created on
‚Ä¢	Created By
Fields per rate rule:
‚Ä¢	Apply On (Product / Sub-Group / Group / Flat)
‚Ä¢	Item Selector (SKU / Sub-Group / Group; blank if Flat)
‚Ä¢	Rate Type (Per Dozen / Per Pair)(
‚Ä¢	Rate Value (e.g., Rs 30 per pair)
4. FINANCIAL
Account Group = WHAT type of cost
Department = WHERE / WHY the cost happened
DEPARTMENTS: 
1)	Admin (salaries, rent, electricity, stationary)
2)	SALES (sales salaries, commissions, travel) 
3)	Marketing (video, ads, banners, influencers, customers food)
4)	DISTRIBUTION/LOGISTICS (Couriers Charger, Freight to customers)
5)	IT/SYSTEMS (Internet bill/ ERP subscription, Cameras etc)
6)	HR/WELFARE (staff welfare, HR staff salaries, attendance system maintenance, medical expenses, staff lunches, washroom supplies, office tea & water - HR expenses are the cost of managing people)
PRODUCTION-RELATED DEPARTMENTS:
1)	STITCHING
2)	EMBROIDERY
3)	PRINTING
4)	LASTING/MACHINE
5)	Upper
6)	Sole 
7)	PACKAGING
8)	FACTORY/MACHINE MAINTENANCE
9)	PRODUCTION SUPERVISION
1)	Activity
‚Ä¢	Cash Voucher (in Header ‚Äì add VR No, date, account name, any description) (in rows account/party/labor/employee name, description, cash receipt, cash payment, department)
‚Ä¢	Journal Voucher  (in Header ‚Äì add VR No, date, any description) ( in each row - account name, VR Type (opening/accrual/adjustment/closing) description, department, debit, credit)
‚Ä¢	Bank Voucher ( in each row ‚Äì account name, reference no/ID, description, bank payment, bank receipt, status (pending/cleared/failed) ,clearing date (auto-filled when admin confirms))
2)	Reports
‚Ä¢	Daily Control and Cash Flow: 
o	Cash Book (Day by Day cash receipts and payments, Know exact cash on hand)
o	Cash Voucher Register (find who paid whom, when and why)
o	Bank Transactions Report (showing confirmed/pending/failed transactions for each/all accounts and for each/some/all branches within a specific date range)
‚Ä¢	Expenses and Cost Control - ‚ÄúWhere is money being spent, and why?‚Äù
o	Expense Analysis Report (Expenses broken by department/account groups (Admin, Stitching, Cutting, etc.) )( OPTIONS ‚Äì Accounts Group View/ Department View/ Detailed - Department->Account Group -> Amount)
o	Production Over-Head Cost Analysis (Maintenance, supervision, utilities by department ‚Äì Identifies inefficient departments)( OPTIONS ‚Äì Accounts Group View/ Department View/ Detailed - Department->Account Group -> Amount)
o	Non-Production (Period) Expense  Analysis(‚ÄúWhat costs did we incur this month that are NOT part of product cost?‚Äù ‚Äì it includes expenses from non-production departments ‚Äì SHOWS TRUE BUSINESS OVERHEAD)(OPTIONS ‚Äì Accounts Group View/ Department View/ Detailed - Department->Account Group -> Amount)
o	Accrued Expenses Report (Expenses incurred but not yet paid ‚Äì Account Group as the primary grouping ‚Äì option to expend/detail view)
‚Ä¢	Profitability Reports
o	Profit-Wise Profitability Analysis (report gives option to deduct only BOM cost or Labour cost or commission or production-overhead or all or multiple)
o	Profit and Loss Statement (monthly/weekly/daily ‚Äì use supplier balances, finished stock cost, raw material stock cost, semi-finished stock cost, capital, sale, expenses )
‚Ä¢	Accounting & Audit
o	Journal Voucher Register (All journal voucher types)
o	Account Activity Ledger (Full movement of one account)  (SELECT ACCOUNT NAME, BRANCH OR ALL, DATE RANGE, TYPE(DETAIL/SUMMARY) -> ON LOAD -> TABLE-> DATE, VR TYPE (CASH SALE/CV ETC), DEBIT, CREDIT, BALANCE (enable to lock certain accounts
o	Trial Balance Summary  (credit must equal debit, asks ‚ÄúIs my accounting equation balanced?)
o	Payroll & Wage Balance Report (what is each employee/labors current balance ‚Äì salary given/ not given ‚Äì option to select employees/labors/both)
3)	Audit Freeze
A simple screen:
Period Control
‚Ä¢	Branch: (Current / All)
‚Ä¢	Period: (Month/Year)
‚Ä¢	Status:
o	Open ‚úÖ
o	Period Locked üîí
o	Audit Frozen üßä (strong lock)
Buttons:
‚Ä¢	Lock Period
‚Ä¢	Freeze Period
‚Ä¢	(Unfreeze only by super-admin + reason)

5. PURCHASE
1)	Activity
‚Ä¢	Purchase Order 
‚Ä¢	Purchase Invoice (option to select purchase by cash/loan ‚Äì if cash purchase then which account paid the price selection)(reference the purchase order if any) (in each row-> raw material, unit, quantity, rate, total)
‚Ä¢	Requirement for Purchase Order (require PO for invoices > a certain amount, for certain suppliers, for certain raw materials etc. )
‚Ä¢	Purchase Return (date/VR No./ Book No./Reason/Select-Party)(Per-Row -> product, unit, quantity, rate, and amount)
2)	Reports
‚Ä¢	Supplier Balances Report
‚Ä¢	Supplier Ledger Report
‚Ä¢	Purchase Report (options: date range,  select supplier/all dropdown, select raw-material/all/some, select raw material group/all, branch, report type (detail/summary), order by(invoice/product/ party)
‚Ä¢	Purchase Return Report  (options: date range,  select supplier/all dropdown, select raw-material/all/some, select raw material group/all, branch, report type (detail/summary), order by(invoice/product/ party)
6. PRODUCTION - Completion-based production model 
1)	Activity
‚Ä¢	Semi-Finished Production (once production is completed) (when production is added in system both consumption and general labor vouchers should be automatically created using BOM)
‚Ä¢	Finished Production (once production is completed (when production is added in system both consumption and general labor vouchers should be automatically created using BOM)
Fields
‚Ä¢	Article / SKU
‚Ä¢	Status: PACKED / LOOSE
‚Ä¢	Unit (PAIR/DOZEN ‚Äì AUTO ‚Äì IF PACKED THEN DOZEN OTHERWISE PAIR)
‚Ä¢	Quantity
o	If PACKED: allow only multiples of 0.5 (‚Ä¶, 0.5, 1.0, 1.5, 2.0 ‚Ä¶)
o	If LOOSE: allow integers only
‚Ä¢	Total Pairs (system-calculated, stored as integer). If PACKED:
ÔÇß	TotalPairs = Quantity √ó 12 (must result in whole number, validation required)
ÔÇß	If LOOSE:
ÔÇß	TotalPairs = Quantity
‚Ä¢	Department Completion Voucher (DCV): 
A) wip_dept_balance (fast current balance)
‚Ä¢	Key: (branch_id, sku_id, dept_id)
Fields:
‚Ä¢	qty_pairs (how many pairs are completed for this dept and waiting to become FG)
‚Ä¢	cost_value (confidential; stored but not shown to workers)
‚Ä¢	last_activity_date
B) wip_dept_ledger (audit trail)
Every WIP completion adds ‚ÄúIN‚Äù. Every FG posting consumes ‚ÄúOUT‚Äù.
‚Ä¢	This is your proof + history, without needing batches.
3) How WIP Voucher works in your model (completion-only)
WIP Voucher = ‚ÄúDepartment Completion Voucher‚Äù
‚Ä¢	Worker enters:
‚Ä¢	SKU
‚Ä¢	Department
‚Ä¢	Completed Qty (pairs)
‚Ä¢	Labour
System does (backend):
‚Ä¢	Consumes only that department‚Äôs BOM RM for that qty
Cr Inventory (RM/SFG) at WAC
Dr Production Clearing
‚Ä¢	Books only that department‚Äôs labour
Cr Wages Payable
Dr Production Clearing
‚Ä¢	Adds to WIP dept pool
o	wip_dept_balance.qty_pairs += completed_qty
o	wip_dept_balance.cost_value += dept_cost_for_that_qty
ledger ‚ÄúIN‚Äù row created
Workers never see cost. Cost stays in DB.
4) How Finished Production works later (the ‚Äúskip and subtract‚Äù you want)
When FG is posted for FG_qty (pairs), system loops each BOM department. For each dept:
‚Ä¢	available = wip_dept_balance.qty_pairs
‚Ä¢	use = min(FG_qty, available)
‚Ä¢	If use > 0 (already completed earlier)
‚úÖ Don‚Äôt deduct RM/labour again.
Just reduce the pool:
‚Ä¢	wip_dept_balance.qty_pairs -= use
‚Ä¢	wip_dept_balance.cost_value -= allocated_cost(use) (FIFO or weighted avg behind the scenes)
‚Ä¢	ledger ‚ÄúOUT‚Äù row created
          If FG_qty > available (shortfall), for the remaining quantity (FG_qty - available):
‚Ä¢	do normal BOM consumption + labour posting for that dept (because it wasn‚Äôt completed earlier)
Finally
‚Ä¢	Capitalize FG:
‚Ä¢	Dr Inventory ‚Äì FG
‚Ä¢	Cr Production Clearing
(total cost = costs newly incurred + costs pulled from pools)
That‚Äôs exactly your rule:
o	If FG < stitched qty ‚Üí stitched balance remains
o	If FG > stitched qty ‚Üí you‚Äôll consume all stitched balance and do extra stitching cost for remaining
‚Ä¢	General Labour Production (Header- VR No., Date, Labour, Department)(Row:  Article Code, Name, unit, quantity, rate, amount)  (when the production is added ‚Äì this voucher should be created automatically so all the Labour related costs for the production show in labor‚Äôs ledgers ‚Äì no option to add manually)
‚Ä¢	Production Planning (plan production for future in advance ‚Äì both finished and semi-finished ‚Äì all the raw material required will be shown in pending consumption report)
‚Ä¢	Consumption Voucher (should be automatically added for each production voucher ‚Äì show automatic or added manually)
‚Ä¢	Abnormal Loss Voucher 
o	Keep one voucher type for losses, but make ‚ÄúLoss Type‚Äù a required dropdown at line-level: RM_LOSS / SFG_LOSS / FG_LOSS / DVC_ABANDON (work completed earlier but will not convert to FG). This avoids ‚Äúcomplete voucher write-off‚Äù confusion because every line is its own target.
o	 Voucher header (same style as other vouchers): VR No (auto), Date, Branch, Status (Draft/Pending/Approved), Created By/On, Approved By/On (only if you use approvals), Reason Code (header), Notes (header). Also, decide loss type -> Loss Type (RM_LOSS / SFG_LOSS / FG_LOSS / DVC_ABANDON)
o	 Voucher lines (each line is independent):
‚Ä¢	SKU / Item (RM/SFG/FG or Finished SKU depending on line type)
‚Ä¢	Department (only required for DVC_ABANDON;)
‚Ä¢	Qty (pairs / kg / meter as per item UOM rules)
o	Very important: DVC_ABANDON is ALWAYS ‚Äúper SKU and per department ‚Äù, and a single voucher can contain multiple SKUs/lines. No ‚Äúwrite-off the whole voucher‚Äù concept.
o	 Hidden backend pool (not shown to workers) to support delayed finishing without any Batch ID:
‚Ä¢	Maintain a table like dvc_pending_pool per (branch_id, sku_id, department_id) with:
o	pending_qty_pairs
o	pending_cost_amount
o	last_updated_at
‚Ä¢	This pool increases when you post the DVC/WIP completion voucher for that department, and decreases when Finished Production consumes it later.
o	Validation rules:
‚Ä¢	For DVC_ABANDON lines: abandon_qty_pairs <= pending_qty_pairs in dvc_pending_pool for that exact (branch, sku, department).
‚Ä¢	For RM/SFG/FG loss: loss_qty <= current_stock_qty (unless you allow negative stock, but you shouldn‚Äôt).
‚Ä¢	No cost fields are visible on screen for any worker role; costs are calculated + posted in backend only.
o	Costing rule (backend only):
‚Ä¢	Always use cost (WAC or your chosen method) for GL + stock value. Never selling rate.
‚Ä¢	For DVC_ABANDON, calculate a unit cost from the pool:
o	unit_cost = pending_cost_amount / pending_qty_pairs (guard against divide-by-zero)
o	cost_to_clear = unit_cost * abandon_qty_pairs
o	Reduce the pool by the same qty and cost.
o	Accounting postings (summed from lines, but computed line-wise):
‚Ä¢	RM_LOSS / SFG_LOSS / FG_LOSS:
o	Dr Abnormal Loss Expense
o	Cr Inventory (RM/SFG/FG) (at cost/WAC)
o	Stock ledger decreases.
‚Ä¢	DVC_ABANDON (work already completed earlier, never becomes FG):
o	Dr Abnormal Loss Expense
o	Cr Production Clearing (WIP Control) (for cost_to_clear)
o	NO stock ledger movement (because RM/SFG was already consumed when DVC/WIP completion was posted).
o	Only the pending pool is reduced.
o	Reporting impact:
‚Ä¢	Your ‚ÄúLoss report (normal loss, abnormal loss)‚Äù should include DVC_ABANDON lines separately so management can see ‚Äúcompleted but scrapped before FG‚Äù by SKU and by department, with qty + cost impact (cost visible only to permitted roles).
‚Ä¢	NOTE: Alert notification when production without raw material. When work is done (DCV voucher / production completion), accrue the cost:
o	Dr Production Clearing
o	Cr Wages Payable
‚Ä¢	When you actually pay labour later (or earlier), you post:
o	Dr Wages Payable
o	Cr Cash/Bank
So payment timing doesn‚Äôt break costing.
2)	Reports
‚Ä¢	Production Report  (finished/semi-finished)
‚Ä¢	DVC REPORT (shows which articles along with their department eg stitching still not gone into production along with their creation date and which are gone into production)
‚Ä¢	Consumption Report (option to filter automatic or manual consumption)
‚Ä¢	Pending Consumption Report
‚Ä¢	Labour Ledger Report
‚Ä¢	Labour Balances Report
‚Ä¢	Lose report (normal loss, abnormal loss)
NOTE: Labour vouchers and consumption vouchers are created ONLY when production is COMPLETED.
Production planning does NOT create consumption or labour.
7. INVENTORY
1)	Activity 
‚Ä¢	Opening Stock Voucher 
‚Ä¢	Stock Transfer Voucher: (stn_gl_mode = NONE)
‚Ä¢	Action: Select Destination Branch -> Select Items (FINISHED/SEMI-FINISHED/RAW MATERIAL)
‚Ä¢	Effect: Deduct stock from Source Branch. Add stock to "Virtual Transit Location."
‚Ä¢	Accounting: No financial impact on PL, strictly asset movement.
‚Ä¢	Stock Receive Voucher 
o	Make a voucher type like GRN_IN (Internal Receive) that has a field:
o	Against STN_OUT (dropdown/search)
o	User opens GRN_IN, selects STN_OUT ‚Üí system auto-fills lines ‚Üí user posts.
‚Ä¢	Stock Count Adjustment Voucher (finished/semi-finished/raw-material ‚Äì system vs actual stock quantity‚Äì difference ‚Äì amount difference) IT SHOULD ADJUST STOCK ONLY AFTER APPROVAL FROM ADMIN ... ONLY SHOW AFFECT AFTER APPROVED, VOUCHER SHOW OPTION TO APPROVE/REJECT TO ADMIN! (on approval, voucher becomes locked & non-editable, adjustment appears in stock ledger , Accounting entries auto-posted )  -  ADD A REASON CODE AND REASON INPUT NOTES
Column	Explanation
Item Code	From item master
Item Name	Auto
Unit	Base unit only
System Stock Quantity	Auto-fetched (locked)
Physical Stock Quantity	User input
Difference Qty	Auto (Physical ‚àí System)
Selling Rate	Selling Rate Auto fetched from system 
Amount Difference	Auto (Difference Qty * Selling Rate)
‚Ä¢  In the Stock Count Adjustment screen, workers see:
‚Ä¢	Stock Count lines store selling_rate_display (optional) + physical_qty
‚Ä¢	Posting uses wac_cost_rate pulled internally
‚Ä¢	Only accounts/admin reports can see ‚Äúvalue impact‚Äù
‚Ä¢	System Qty, Physical Qty, Difference Qty
‚Ä¢	Selling rate based on difference quantity
‚Ä¢	NO cost fields shown
‚Ä¢  In the database (and backend posting):
‚Ä¢	store unit_cost_used (WAC) in stock ledger / GL posting rows
‚Ä¢	but do not return it in the API for users without permission
NOTE: STOCK TRANSFER NOTE SHOULD HAVE A BUTTON TO DOWNLOAD GATE PASS.
2)	Reports
‚Ä¢	Stock Quantity Report (option to see separately for each branch or all branches ‚Äì for each or all three finished/semi-finished/raw-material/scrap) (show the stock for all articles for which stock is not equal to 0)
‚Ä¢	Stock Amount Report (it will show stock for all articles, cost price ‚Äì it uses WAC for the date loaded, selling price) (Store month-end snapshots (closing qty/value/WAC) and optionally keep daily snapshots for a limited recent window ‚Äì 30 DAYS)
‚Ä¢	Stock Ledger Report (Just ensure it includes: voucher reference (type + number + date), In/Out qty, unit cost used and value, running balance (qty + value) per SKU bucket, branch/warehouse + user/audit stamps)
‚Ä¢	Stock/Item Activity Report (opening, production, sale, adjustment, closing for a selected date range ‚Äì for product-group, single product, all products option ‚Äì both semi-finished and finished option ‚Äì for all branches or few)
‚Ä¢	Pending Outgoing Transfers Report (Source view): So, the source can track what they sent that hasn‚Äôt been received (SKU No, Destination, Dispatch date, Items + qty, type finished/semi-finished/ raw-material)(option to select status received /pending, also the option to select finished/semi-finished/raw-materials/all/some, destination-branch-selection - all/few/one)
‚Ä¢	Pending Incoming Transfers Report (Destination view)- This is your operational report( includes SKU No, Source branch, Dispatch date, Items + qty, Transit days (age)) )(option to select status received, also the option to select finished/semi-finished/raw-materials/all/some, source-branch-selection - all/few/one)
‚Ä¢	Stock Count Register (main report): Purpose: audit + control ‚Äî ‚Äúwhat stock counts were done, when, by who, and what was the impact?‚Äù
Columns (header-level):
‚Ä¢	Voucher No, Date
‚Ä¢	Branch, Warehouse/Location (if you have)
‚Ä¢	Item Type (RM / SFG / FG)
‚Ä¢	Status (Draft / Pending / Approved / Rejected)
‚Ä¢	Total Items Counted
‚Ä¢	Total Qty Difference (sum abs diff, optional)
‚Ä¢	Total Value Impact (Cost/WAC) (approved only)
‚Ä¢	Total Sale Value Impact
‚Ä¢	Reason Code (header) + Notes (header)
‚Ä¢	Counted By, Approved By, Approved Date
Filters:
‚Ä¢	Date range
‚Ä¢	Branch
‚Ä¢	Status
‚Ä¢	Item Type
‚Ä¢	Reason Code
‚Ä¢	Counted By / Approved By
‚Ä¢	Demand Gap Report  (‚ÄúBased on the last 3 months‚Äô sales average, do we have enough stock to cover one month from current date?‚Äù_(shows sales for last 3 months in 3 columns for all finished article variants and then average sales per month and then compare it with current stock and check based on this if stock is low ‚Äì color red if low stock) (need to check if the sales trend is declining or not) (if declining, required stock = average monthly sales * 0.8 and gap = required stock - current stock )  (Add Status categories : Low, Watch, OK, New SKU ) (for new articles -> use daily average √ó 30 (proration) once launch>20 days)

8. Outward & Returnable 
‚ÄúWhat left the factory, why, where is it now, and has it returned?‚Äù
Vouchers:
‚Ä¢	Returnable Dispatch Voucher (Moulds sent for repair/ Knives/tools for sharpening/ Fixtures, gauges, dies/ any non-stock company asset leaving premises)
Header Fields
‚Ä¢	RGP No (auto)
‚Ä¢	Date
‚Ä¢	Branch
‚Ä¢	Vendor / Repair Party
‚Ä¢	Reason (Repair / Sharpening / Calibration / Trial)
‚Ä¢	Expected Return Date
‚Ä¢	Issued By
‚Ä¢	Approved By
‚Ä¢	Gate Pass PDF download
Line Fields
‚Ä¢	Item Type (Mould / Tool / Knife / Fixture / Other)
‚Ä¢	Item Description
‚Ä¢	Asset Code / Serial No (optional but recommended)
‚Ä¢	Quantity
‚Ä¢	Condition at Dispatch (Good / Worn / Damaged)
‚Ä¢	Remarks
              System Rules
‚Ä¢	‚ùå No inventory deduction
‚Ä¢	‚ùå No accounting entry
‚Ä¢	‚úÖ Approval mandatory
‚Ä¢	‚úÖ Gate pass printable

‚Ä¢	Returnable Receipt Voucher 
Linked To
‚Ä¢	Original RGP-Outward (mandatory)
Header Fields
‚Ä¢	RGP-Outward Reference
‚Ä¢	Return Date
‚Ä¢	Received By
Line Fields
‚Ä¢	Returned Quantity
‚Ä¢	Condition on Return (OK / Repaired / Damaged / Scrap)
‚Ä¢	Short/Excess Qty (auto-calculated)
‚Ä¢	Remarks
System Rules
‚Ä¢	Partial returns allowed
‚Ä¢	Multiple inward entries allowed against one outward
‚Ä¢	Status auto-updated (Pending / Partially Returned / Closed)
     REPORTS:
2.1 Pending Returnables Report (MOST IMPORTANT)
Purpose
Daily operational control.
Shows
‚Ä¢	RGP No
‚Ä¢	Item Description
‚Ä¢	Vendor
‚Ä¢	Qty Sent
‚Ä¢	Qty Returned
‚Ä¢	Balance Pending
‚Ä¢	Expected Return Date
‚Ä¢	Days Out
‚Ä¢	Status
Filters
‚Ä¢	Branch
‚Ä¢	Vendor
‚Ä¢	Item Type
‚Ä¢	Status
‚Ä¢	Date Range
2.2 Overdue Returnables Report
Purpose
Exception control & follow-up.
Shows
‚Ä¢	All pending fields
‚Ä¢	Overdue Days
‚Ä¢	Highlight overdue entries (red flag)
Optional
‚Ä¢	Email / notification trigger of admin/s (future enhancement)
2.3 Asset Movement History
Purpose
Audit & lifecycle tracking.
Shows (per asset / item)
‚Ä¢	Date Out
‚Ä¢	Vendor
‚Ä¢	Reason
‚Ä¢	Date In
‚Ä¢	Condition Out vs In
‚Ä¢	Total Days Outside
‚Ä¢	No. of times sent
Useful for:
‚Ä¢	Asset abuse detection
‚Ä¢	Replacement decisions
‚Ä¢	Vendor performance

9. SALES
1)	Activity 
‚Ä¢	Sales Order Voucher (those bills added whose deliveries are pending)(give option to receive partial/complete payment if any) (option to add claim, pairs, amount, issue) (gate pass for all sale vouchers) (select account name for sale amount accumulation and one salesman) (must create customer party to add the voucher)
‚Ä¢	Sales Voucher  
‚úÖ Sales Voucher ‚Äì Header Fields (Final) ‚Äì CASH SALE MEANS FULL PAYMENT RIGHT AWAY AND CREDIT MEANS PARTIAL/NO PAYMENT
1.	Voucher No (auto-generated, system-controlled)
2.	Voucher Date (required; must be in an open period)
3.	Sale Mode: Direct / From Sales Order
4.	Payment Type: Cash / Credit
5.	Customer Name (selectable from party information ‚Äì if Credit/Delivery) (otherwise manual if cash sale)
6.	Customer (Party ID) (auto)
7.	Phone Number (auto-fetched from party if credit/delivery otherwise manual - mandatory)
8.	Sales Order Link if delivery (based on customer ID ‚Äì let user choose the items to deliver from pending articles through a dropdown and their quantity)
9.	Salesman (mandatory ‚Äì auto fetched from sales order if delivery)
10.	Payment Due Date (mandatory if credit)
11.	Receive Into Account (Cash/Bank - mandatory if payment received)
12.	Delivery Method - Customer Pickup/ Our Delivery
‚úÖ Row fields (approved)
‚Ä¢	SKU / Article
‚Ä¢	Article Name (auto)
‚Ä¢	Status (Packed/Loose) ‚Äì packed dozen, loose pair
‚Ä¢	Sale Qty
‚Ä¢	Return Qty
‚Ä¢	Return Reason (dropdown only if Return Qty > 0)
‚Ä¢	Pair Rate 
‚Ä¢	Amount (auto) ‚Äì total pairs * pair rate
‚Ä¢	Pair Discount
‚Ä¢	Total Discount
‚Ä¢	Total (auto) ‚Äì total pairs * (pair rate - pair discount)
‚úÖ Final fields 
‚Ä¢	Total sales amount
‚Ä¢	Total Returns amount
‚Ä¢	Extra Discount (if any)
‚Ä¢	Final amount
‚Ä¢	Payment Received Amount (If Cash: auto-fills Final Amount (editable only by permission), If Credit: defaults to 0 (user may enter partial/advance))
Must-have rules (so it doesn‚Äôt break)
1.	Mutual exclusivity per row
o	In one row, allow either Sale Qty OR Return Qty, not both.
o	If user needs both, they add two rows (same SKU allowed).
2.	Return Reason validation
o	If Return Qty > 0 ‚Üí Return Reason is mandatory
o	If Return Qty = 0 ‚Üí Return Reason disabled/blank
3.	Rate source and locking
o	Rate auto-fills from SKU price list / last sale rate (your choice)
o	Only users with permission can override rate/discount.
4.	Discount calculation clarity
o	Define whether Pair Discount/Total Discount apply to:
ÔÇß	Sales and returns both ‚úÖ (recommended)
o	Most ERPs: returns credit at original net rate (auto from original invoice if linked; otherwise current rate).
5.	Posting behavior on save (internal model)
o	Sale Qty ‚Üí creates a SALE movement
o	Return Qty ‚Üí creates a RETURN movement
(even if UI is one table)
NOTE: SALES VOUCHERS SHOULD HAVE AN OPTION TO PRINT A GATE PASS
2)	Customers Report
‚Ä¢	Customer Listings (filters ‚Äì party based/ cash sales based, date range)(cash sales-> name + phone numbers)(Party based ‚Äì all the information taken)
‚Ä¢	Customer Balances Report: Shows customer-level receivable status, derived from invoice-level outstanding balances after applying payments and credit notes.
Columns
‚Ä¢	Customer Name
‚Ä¢	Group
‚Ä¢	Days Since Last Payment
‚Ä¢	Days Since Last Sale
‚Ä¢	Overdue Amount (sum of outstanding where due date < report date)
‚Ä¢	Number of Overdue Invoices (number of latest invoices whose sum >= overdue amount)
‚Ä¢	Highest Overdue Invoice Age (max days overdue) (max(report date) among overdue invoices with outstanding > 0)
‚Ä¢	Total Balance (Overdue + Not-Yet-Overdue)
‚Ä¢	Follow-up Status (None / Called / Promised / Disputed / Partial / Collected)
‚Ä¢	Promise-to-Pay Date (required only if Status = Promised)
‚Ä¢	Promise Amount (required only if Status = Promised)
Allocation Rules (mandatory)
1.	Sales Return / Credit Note allocation policy:
A sales return creates a Credit Note that reduces receivables. The system must allocate the credit note to invoices as follows:
o	Auto-allocated by FIFO to the customer‚Äôs oldest open invoice(s), skipping disputed/hold invoices unless overridden.
2.	Period Lock / Audit Freeze enforcement:
Posting or editing receipts, credit notes, or allocations is blocked if the voucher date falls in a Locked/Frozen period for the relevant branch (super-admin override only if allowed, with reason).
‚Ä¢	Customer Ledger Report
3)	SALES REPORT
‚Ä¢	Claim Report (HOW MANY PAIRS, PRICE, ISSUE, CUSTOMER NAME)
‚Ä¢	Sales Report  (give option to search based on customer name) (option to check cash, credit or both report)
‚Ä¢	Sale Return Report
‚Ä¢	Sales Order Report
‚Ä¢	Sale Discount Report
‚Ä¢	Net Sale Report
‚Ä¢	Monthly Product Profitability Report (tells which article made the most money this month, which product contributes most to total profit, which high-selling item is silently hurting profit)
Column	Definition
Rank	By Gross Profit
Parent Article	Base product
SKU Code	Unique variant
Variant Attributes	Color / Size / Grade / Packaging
Sales Qty	Total quantity sold
Sales Value	Selling price * sales Qty
Cost Value	Cost price * sales Qty
Gross Profit	Sales ‚Äì Cost Value
Margin %	GP √∑ Sales
Profit Contribution %	Variant GP √∑ Total GP
GL POSTINGS
These are the standard accounts your postings will reference:
Assets (Current)
‚Ä¢	Office Cash (Cash-in-Hand)
‚Ä¢	Bank ‚Äì [each bank account]
‚Ä¢	Bank Clearing / Undeposited Funds (for pending/cleared/failed bank voucher)
‚Ä¢	Cash with Salesman (current asset; ideally salesman-wise sub-ledger)
‚Ä¢	Accounts Receivable (AR Control)
‚Ä¢	Inventory ‚Äì Raw Materials (RM)
‚Ä¢	Inventory ‚Äì Semi-Finished (SFG)
‚Ä¢	Inventory ‚Äì Finished Goods (FG)
‚Ä¢	Inventory ‚Äì Transit (for STN transit location, optional GL)
‚Ä¢	Advances to Suppliers (optional)
‚Ä¢	Employee Advances (optional)
Liabilities
‚Ä¢	Accounts Payable (AP Control)
‚Ä¢	Wages Payable (labour)
‚Ä¢	Salaries Payable (employees)
‚Ä¢	Accrued Expenses Payable (optional but recommended)
Income / Contra / Expense
‚Ä¢	Sales Revenue
‚Ä¢	Sales Returns (contra income)
‚Ä¢	Sales Discounts (contra income or expense‚Äîchoose one; I recommend contra)
‚Ä¢	COGS ‚Äì Finished Goods
‚Ä¢	Stock Adjustment Gain / Loss
‚Ä¢	Abnormal Loss Expense
‚Ä¢	Commission Expense (sales)
‚Ä¢	Other Expenses (Electricity, Rent, Fuel, etc.)

1Ô∏è‚É£ SALES MODULE ‚Äî SALES VOUCHER (Sale + Return )
1.1 CASH SALE (FULL PAYMENT ONLY)
Revenue / Cash
Dr (Asset)	Cr (Income)
Receiving Account (Office Cash / Bank / Cash with Salesman)	Sales Revenue
Inventory / COGS
Dr (Expense)	Cr (Asset)
COGS ‚Äì Finished Goods	Inventory ‚Äì Finished Goods
üìå Rules
PaymentReceived = NetInvoice (mandatory)
No AR allowed
1.2 CREDIT SALE (NO PAYMENT AT SALE)
Revenue / Receivable
Dr (Asset)	Cr (Income)
Accounts Receivable (AR Control)	Sales Revenue
Inventory / COGS
Dr	Cr
COGS ‚Äì Finished Goods	Inventory ‚Äì Finished Goods

1.3 CREDIT SALE (PARTIAL PAYMENT AT SALE)
Revenue / Cash / AR
Dr	Cr
Receiving Account	Sales Revenue
Accounts Receivable (AR Control)	‚Äî (NetInvoice ‚àí PaymentReceived)
Inventory / COGS
Dr	Cr
COGS ‚Äì Finished Goods	Inventory ‚Äì Finished Goods

1.4 SALES RETURN (ROW-LEVEL)
Revenue Reversal (ALL return reasons)
Dr (Contra Income)	Cr
Sales Returns	AR Control or Receiving Account

Inventory Impact (CONDITIONAL)
‚úÖ Return Reason ‚â† ‚ÄúDEFECTED‚Äù
Dr	Cr
Inventory ‚Äì Finished Goods	COGS ‚Äì Finished Goods
‚ùå Return Reason = ‚ÄúDEFECTED‚Äù
Dr (Expense)	Cr (Expense)
Defected Return Expense 	COGS ‚Äì Finished Goods
üö´ Stock does NOT increase

2Ô∏è‚É£ CASH / BANK / JOURNAL (NO SEPARATE RECEIPT OR PAYMENT VOUCHERS)
2.1 CUSTOMER RECEIPT (via Cash / Bank / JV)
Dr (Asset)	Cr (Asset)
Office Cash / Bank / Cash with Salesman	Accounts Receivable (AR Control)

2.2 SUPPLIER PAYMENT (via Cash / Bank / JV)
Dr (Liability)	Cr (Asset)
Accounts Payable (AP Control)	Office Cash / Bank

3Ô∏è‚É£ PURCHASE MODULE
3.1 PURCHASE ORDER
‚ùå NO G
3.2 PURCHASE INVOICE ‚Äì CREDIT
Dr (Asset)	Cr (Liability)
Inventory ‚Äì Raw Material	Accounts Payable (AP Control)

3.3 PURCHASE INVOICE ‚Äì CASH
Dr (Asset)	Cr (Asset)
Inventory ‚Äì Raw Material	Office Cash / Bank

3.4 PURCHASE RETURN
Credit Return
Dr	Cr
Accounts Payable	Inventory ‚Äì Raw Material
Cash Purchase Refund
Dr	Cr
Office Cash / Bank	Inventory ‚Äì Raw Material
NOTE: NOTHING ADDED TO ACCOUNT PAYABLE AS THE ITEM WAS BOUGHT ON CASH.
4Ô∏è‚É£ INVENTORY MODULE
4.1 STOCK TRANSFER NOTE (STN)
Recommended
‚ùå NO GL (stock ledger only)
Optional (asset-only)
Dr	Cr
Inventory ‚Äì Transit	Inventory ‚Äì RM / FG / SFG

4.2 OPENING STOCK
Dr (Asset)	Cr (Equity)
Inventory ‚Äì RM / SFG / FG	Opening Balance Equity

4.3 Stock Count Adjustment Voucher (AFTER APPROVAL)
Stock Gain
Dr	Cr
Inventory	Stock Adjustment Gain
Stock Loss
Dr	Cr
Stock Adjustment Loss	Inventory
üìå GL uses COST, not selling rate
5Ô∏è‚É£ PRODUCTION 
5.1 FINISHED PRODUCTION
Material / SFG Consumption
Dr	Cr
Production Clearing	Inventory ‚Äì RM / SFG
Labour
Dr	Cr
Production Clearing	Wages Payable
Capitalize FG
Dr	Cr
Inventory ‚Äì Finished Goods	Production Clearing

5.2 SEMI-FINISHED PRODUCTION
Dr	Cr
Inventory ‚Äì Semi-Finished	Production Clearing

5.3 ABNORMAL LOSS
Dr (Expense)	Cr (Asset)
Abnormal Loss Expense	Inventory ‚Äì RM / SFG / FG

6Ô∏è‚É£ FINANCIAL VOUCHERS
6.1 CASH VOUCHER
Payment
Dr	Cr
Expense / AP / Advances / Payables	Office Cash
Receipt
Dr	Cr
Office Cash	Income / AR / AP Refund

6.2 BANK VOUCHER (WITH CLEARING)
Pending
Dr	Cr
Bank Clearing	AR / Income
Expense / AP	Bank Clearing
Cleared
Dr	Cr
Bank	Bank Clearing
Bank Clearing	Bank
Failed
‚û° Reverse pending entry
6.3 JOURNAL VOUCHER
Balanced free-form entries for:
Accruals
Adjustments
Period close
7Ô∏è‚É£ HR & PAYROLL
Salary Accrual
Dr	Cr
Salary Expense	Salaries Payable
Salary Payment
Dr	Cr
Salaries Payable	Office Cash / Bank
Commission Accrual
Dr	Cr
Commission Expense	Commission Payable
Commission / Wage Payment
Dr	Cr
Commission / Wages Payable	Cash / Bank

DCV Voucher posting (per department):
‚Ä¢	Dr Production Clearing 
‚Ä¢	Cr Inventory ‚Äì RM / SFG (for dept RM lines)
‚Ä¢	Cr Wages Payable / Labour Payable (for dept labour)
Case: Customer pays  100,000 online (not cleared yet)
Step 1 ‚Äî Pending
‚Ä¢	Dr Bank Clearing 100,000
‚Ä¢	Cr AR 100,000 (or Cr Sales Revenue if it‚Äôs a direct receipt)
At this point:
‚Ä¢	Bank (real) didn‚Äôt increase yet ‚úÖ
‚Ä¢	Bank Clearing increased ‚úÖ
Total assets increased by 100,000 once (which is correct, because you now have a cheque/claim to cash).
Step 2 ‚Äî When bank clears
‚Ä¢	Dr Bank 100,000
‚Ä¢	Cr Bank Clearing 100,000
Now:
‚Ä¢	Bank goes up ‚úÖ
‚Ä¢	Clearing goes down ‚úÖ
Net effect on assets = 0 at clearance time (you‚Äôre just moving value from ‚Äúpending‚Äù to ‚Äúactual bank‚Äù).
So nothing gets counted twice; it‚Äôs a transfer between two asset accounts.
UNIVERSAL RULES
A) One universal ‚ÄúVoucher Engine‚Äù (non-negotiable)
All vouchers (Sales, Purchase, Cash/Bank/JV, Stock Count, STN, Production, DCV, Abnormal Loss, RGP) must follow the same pattern:
‚Ä¢	voucher_header: voucher_no, voucher_type, branch_id, voucher_date, status (Draft/Pending/Approved/Rejected/Posted), created_by/on, approved_by/on, remarks
‚Ä¢	voucher_lines: item/account/labour reference + qty/rate/amount + department + extra JSON/meta
‚Ä¢	posting tables (system-generated):
o	gl_entry_header + gl_entry_lines
o	stock_ledger
Not all vouchers need status so keep status fields for every voucher, but allow ‚Äúsimple vouchers‚Äù to skip the workflow
‚Ä¢	status always exists, but voucher types can be configured as:
o	requires_approval = false
o	default_status_on_save = POSTED
‚Ä¢	Then for simple vouchers (like many cash vouchers), you save ‚Üí it becomes POSTED immediately.
‚Ä¢	approved_by, approved_on can be NULL unless requires_approval = true.

